<!DOCTYPE HTML>
<head>
  <meta charset="utf-8">
  
  <title>Experience Dapr - Hello World | Complete Think</title>

  <meta name="author" content="Rick Hwang">
  <meta name="description" content="Dapr 是微軟開發的 Distributed Application Framework。核心概念是 Sidecar 模式，搭配 Building Blocks、Components 等類似 Middleware &amp;#x2F; Pipeline 的概念，以及 K8s CRD (Custom Res">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- properties -->
  <meta property="og:title" content="Experience Dapr - Hello World"/>
  <meta property="og:site_name" content="Complete Think"/>
  <meta property="og:type"      content="website" />
  <meta property="og:url" content="https://rickhw.github.io/2021/03/11/DistributedSystems/Experience-Dapr-Hello-World/"/>
  <meta property="og:image" content="/images/DistributedSystems/dapr/overview_kubernetes.png" />
  

  <!-- links -->
  <link rel="alternative" href="/atom.xml" title="Complete Think" type="application/atom+xml">
  <link href="/favicon.png" rel="icon">

  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <!--
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">
  -->
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  
<!--
<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'G-74Y1F3F5W0']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
-->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-74Y1F3F5W0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-74Y1F3F5W0');
</script>



  <!-- Facebook SDK -->
  <!-- ref: https://developers.facebook.com/docs/plugins/like-button -->
  <!-- @rickd 2022/02/24
    <div id="fb-root"></div>
    <script async defer crossorigin="anonymous"
      src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.2&appId=1554905741423841&autoLogAppEvents=1"></script>
  -->
  <!-- @ricka 2022/02/24 -->
  <!-- ref: https://developers.facebook.com/docs/plugins/like-button -->
  <!--
  <div id="fb-root"></div>
  <script async defer crossorigin="anonymous"
    src="https://connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v13.0&appId=1554905741423841&autoLogAppEvents=1"
    nonce="bd9r2mJp"></script>
  -->

  <!-- @ricka 2022/09/06 -->
  <!-- ref: https://developers.facebook.com/docs/plugins/like-button -->
  <div id="fb-root"></div>
  <script async defer crossorigin="anonymous"
    src="https://connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v14.0&appId=1554905741423841&autoLogAppEvents=1"
    nonce="opf2Gext"></script>


<meta name="generator" content="Hexo 6.1.0"></head>


<body>

  
<nav id="main-nav" class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand active" href="/">Complete Think</a>

      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  	
		  		
					<li class='dropdown'>
						<a aria-expanded='false' class='dropdown-toggle' data-toggle='dropdown' href='#' role='button'><i class="fa fa-folder"></i>Categories <span class='caret'/></span></a>
		            	<ul class='dropdown-menu' role='menu'>
		            	
						<li><a href="/categories/AWS/">AWS <sup>82</sup></a></li>
						
						<li><a href="/categories/About/">About <sup>29</sup></a></li>
						
						<li><a href="/categories/Blog/">Blog <sup>5</sup></a></li>
						
						<li><a href="/categories/經營管理/Career/">Career <sup>6</sup></a></li>
						
						<li><a href="/categories/Coding/">Coding <sup>10</sup></a></li>
						
						<li><a href="/categories/Computer-Science/">Computer Science <sup>6</sup></a></li>
						
						<li><a href="/categories/Container/">Container <sup>9</sup></a></li>
						
						<li><a href="/categories/Data/">Data <sup>2</sup></a></li>
						
						<li><a href="/categories/DevOps/">DevOps <sup>43</sup></a></li>
						
						<li><a href="/categories/Distributed-Systems/">Distributed Systems <sup>20</sup></a></li>
						
						<li><a href="/categories/GCP/">GCP <sup>8</sup></a></li>
						
						<li><a href="/categories/Linux/">Linux <sup>9</sup></a></li>
						
						<li><a href="/categories/Misc/">Misc <sup>3</sup></a></li>
						
						<li><a href="/categories/OS-X/">OS X <sup>4</sup></a></li>
						
						<li><a href="/categories/Redmine/">Redmine <sup>6</sup></a></li>
						
						<li><a href="/categories/Reference/">Reference <sup>5</sup></a></li>
						
						<li><a href="/categories/DevOps/SRE/">SRE <sup>25</sup></a></li>
						
						<li><a href="/categories/Software-Engineering/">Software Engineering <sup>10</sup></a></li>
						
						<li><a href="/categories/System-Design/">System Design <sup>3</sup></a></li>
						
						<li><a href="/categories/經營管理/人才管理/">人才管理 <sup>10</sup></a></li>
						
						<li><a href="/categories/經營管理/溝通/">溝通 <sup>9</sup></a></li>
						
						<li><a href="/categories/經營管理/知識管理/">知識管理 <sup>4</sup></a></li>
						
						<li><a href="/categories/經營管理/">經營管理 <sup>61</sup></a></li>
						
						<li><a href="/categories/軟體測試/">軟體測試 <sup>14</sup></a></li>
						
						</ul>
					</li>
		  		
		  	
		  		
		  			<li><a href="/2016/10/01/AWS-Study-Roadmap/" title="AWS Study Notes."><i class="fa fa-cloud"></i>AWS</a></li>
		  		
		  	
		  		
		  			<li><a href="/categories/DevOps/" title="DevOps / SRE"><i class="fa fa-crosshairs"></i>DevOps</a></li>
		  		
		  	
		  		
		  			<li><a href="/2017/07/01/Index-Software-Engineering-In-Practice/" title="設計、開發、測試、維運"><i class="fa fa-cogs"></i>軟體工程</a></li>
		  		
		  	
		  		
		  			<li><a href="/2017/07/01/Index-Management/" title="經營、管理、領導、教練、產品"><i class="fa fa-users"></i>經營管理</a></li>
		  		
		  	
		  		
		  			<li><a href="/categories/Reference/" title="參考書、名詞對照表"><i class="fa fa-folder"></i>字典工具</a></li>
		  		
		  	
			</ul>

			<!-- @ricka: menu in right -->
			<ul class='nav navbar-nav navbar-right'>
				<li class='dropdown'>
					<a aria-expanded='false' class='dropdown-toggle' data-toggle='dropdown' href='#' role='button'><i class="fa fa-folder"></i>About<span class='caret'/></span></a>
					<ul class='dropdown-menu' role='menu'>
					
						<li><a href="/2017/12/29/About/About-This-Blog/" title="About this blog" target="_blank"> <i class="fa fa-sitemap"></i>關於這裡</a></li>
					
						<li><a href="/2017/12/29/About/About-Author/" title="" target="_blank"> <i class="fa fa-user"></i>關於作者</a></li>
					
						<li><a href="/2017/09/20/About/Learning-Approaches/" title="" target="_blank"> <i class="fa fa-book"></i>學習法則</a></li>
					
						<li><a href="https://www.gtcafe.com" title="GTCafe Studio" target="_blank"> <i class="fa fa-coffee"></i>GTCafe Studio</a></li>
					
						<li><a href="https://www.gtcafe.com/rickmidi/" title="喝咖啡 聊音樂 (v2021)" target="_blank"> <i class="fa fa-music"></i>喝咖啡 聊音樂 (v2021)</a></li>
					
					</ul>
				</li>
			</ul>
			<!-- @ricka end -->
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
    <div class="content" style="background-color: white;">
       




	
		<!-- @rick, header of article -->
		<!-- original
		<div class="page-header">
			<h1> Experience Dapr - Hello World</h1>
		</div>
		-->

		<div class="panel article_title">
			<div class="panel-heading">
    		<h1> Experience Dapr - Hello World</h1>
  		</div>
		</div>

	



<div class="row post">
	<!-- cols -->
	
	<div class="col-md-9">
		

			

			<!-- content -->
			<div class="mypage">
				<!-- ref: https://developers.facebook.com/docs/plugins/like-button -->
				<!-- Facebook in front of page -->
				<!--
				<iframe
					src="https://www.facebook.com/plugins/like.php?href=https%3A%2F%2Frickhw.github.io%2F2021%2F03%2F11%2FDistributedSystems%2FExperience-Dapr-Hello-World%2F&width=450&layout=standard&action=like&size=small&show_faces=true&share=true&height=80&appId=1554905741423841"
					width="450" height="80"
					style="border:none;overflow:hidden"
					scrolling="no" frameborder="0"
					allowTransparency="true" allow="encrypted-media"></iframe>
				-->

				<!-- <div class="fb-like" data-href="https://rickhw.github.io/2021/03/11/DistributedSystems/Experience-Dapr-Hello-World/" data-layout="standard"
					data-action="like" data-size="small" data-show-faces="true" data-share="true"></div>-->

				<div class="fb-like" data-href="https://rickhw.github.io/2021/03/11/DistributedSystems/Experience-Dapr-Hello-World/" data-width="" data-layout="button_count"
					data-action="like" data-size="small" data-share="true"></div>

				<hr />

				<p><a target="_blank" rel="noopener" href="https://dapr.io/">Dapr</a> 是微軟開發的 Distributed Application Framework。核心概念是 Sidecar 模式，搭配 <a target="_blank" rel="noopener" href="https://docs.dapr.io/concepts/building-blocks-concept/">Building Blocks</a>、<a target="_blank" rel="noopener" href="https://docs.dapr.io/concepts/components-concept/">Components</a> 等類似 Middleware &#x2F; Pipeline 的概念，以及 <a target="_blank" rel="noopener" href="https://kubernetes.io/docs/tasks/extend-kubernetes/custom-resources/custom-resource-definitions/">K8s CRD (Custom Resource Definition)</a> 的 擴充 Extensions &#x2F; Plugins 的機制，以這些為主要設計的結構，然後完善大部分分散式系統 (或者說 Microservice) 所必要的基礎建設、開發體驗、維運考量、及架構擴展的需求。</p>
<p>這些概念與特性疊加起來實在是非常吸引我，加上 Dapr 本身很輕量，版本也已經到了 1.0 版，官方宣稱 production ready，可以一試了！底下是探索性的整理使用體驗。</p>
<blockquote>
<p>在這之前，我也 Study 過類似的框架，其中有 Line 的 <a target="_blank" rel="noopener" href="https://armeria.dev/">Armeria</a>、carousell 的 <a target="_blank" rel="noopener" href="https://github.com/carousell/Orion">Orion</a> … 不過概念以及考量的成熟度，還是 Dapr 比較完整。</p>
</blockquote>
<span id="more"></span>


<hr>
<h1 id="Experience-Dapr"><a href="#Experience-Dapr" class="headerlink" title="Experience Dapr"></a>Experience Dapr</h1><h2 id="Setup-Initial"><a href="#Setup-Initial" class="headerlink" title="Setup, Initial"></a>Setup, Initial</h2><p>依照官方文件的 <a target="_blank" rel="noopener" href="https://docs.dapr.io/getting-started/">Getting Started</a>，直接在本機安裝好一個環境，並且初始化。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">❯ dapr init</span><br><span class="line">⌛  Making the jump to hyperspace...</span><br><span class="line">↑  Downloading binaries and setting up components...</span><br><span class="line">Dapr runtime installed to /Users/rick/.dapr/bin, you may run the following to add it to your path <span class="keyword">if</span> you want to run daprd directly:</span><br><span class="line">    <span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/Users/rick/.dapr/bin</span><br><span class="line">✅  Downloaded binaries and completed components <span class="built_in">set</span> up.</span><br><span class="line">ℹ️  daprd binary has been installed to /Users/rick/.dapr/bin.</span><br><span class="line">ℹ️  dapr_placement container is running.</span><br><span class="line">ℹ️  dapr_redis container is running.</span><br><span class="line">ℹ️  dapr_zipkin container is running.</span><br><span class="line">ℹ️  Use `docker ps` to check running containers.</span><br><span class="line">✅  Success! Dapr is up and running. To get started, go here: https://aka.ms/dapr-getting-started</span><br></pre></td></tr></table></figure>

<p>完成初始化之後，可以在 docker 發現啟動了三個 container，如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">~$ docker ps</span><br><span class="line">CONTAINER ID   IMAGE                 COMMAND                  CREATED       STATUS                    PORTS                              NAMES</span><br><span class="line">bf0fc3456f59   daprio/dapr           <span class="string">&quot;./placement&quot;</span>            10 days ago   Up 52 minutes             0.0.0.0:50005-&gt;50005/tcp           dapr_placement</span><br><span class="line">a2837dfafc81   openzipkin/zipkin     <span class="string">&quot;start-zipkin&quot;</span>           10 days ago   Up 52 minutes (healthy)   9410/tcp, 0.0.0.0:9411-&gt;9411/tcp   dapr_zipkin</span><br><span class="line">64a7fd503cc3   redis                 <span class="string">&quot;docker-entrypoint.s…&quot;</span>   10 days ago   Up 52 minutes             0.0.0.0:6379-&gt;6379/tcp             dapr_redis</span><br></pre></td></tr></table></figure>

<p>更新版本，例如 v1.0.0 -&gt; v1.1.0</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">~$ dapr uninstall --all</span><br><span class="line">ℹ️  Removing Dapr from your machine...</span><br><span class="line">ℹ️  Removing directory: /Users/rick/.dapr/bin</span><br><span class="line">ℹ️  Removing container: dapr_placement</span><br><span class="line">ℹ️  Removing container: dapr_redis</span><br><span class="line">ℹ️  Removing container: dapr_zipkin</span><br><span class="line">ℹ️  Removing directory: /Users/rick/.dapr</span><br><span class="line">✅  Dapr has been removed successfully</span><br><span class="line"></span><br><span class="line">~$ dapr init --runtime-version=1.1.0</span><br><span class="line">⌛  Making the jump to hyperspace...</span><br><span class="line">↓  Downloading binaries and setting up components...</span><br><span class="line">Dapr runtime installed to /Users/rick/.dapr/bin, you may run the following to add it to your path <span class="keyword">if</span> you want to run daprd directly:</span><br><span class="line">    <span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/Users/rick/.dapr/bin</span><br><span class="line">✅  Downloaded binaries and completed components <span class="built_in">set</span> up.</span><br><span class="line">ℹ️  daprd binary has been installed to /Users/rick/.dapr/bin.</span><br><span class="line">ℹ️  dapr_placement container is running.</span><br><span class="line">ℹ️  dapr_redis container is running.</span><br><span class="line">ℹ️  dapr_zipkin container is running.</span><br><span class="line">ℹ️  Use `docker ps` to check running containers.</span><br><span class="line">✅  Success! Dapr is up and running. To get started, go here: https://aka.ms/dapr-getting-started</span><br><span class="line"></span><br><span class="line">~$ dapr --version</span><br><span class="line">CLI version: 1.0.0</span><br><span class="line">Runtime version: 1.1.0</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Dapr-Runtime-and-Components"><a href="#Dapr-Runtime-and-Components" class="headerlink" title="Dapr Runtime and Components"></a>Dapr Runtime and Components</h3><p>接下來就是 dapr 初始化的 component 定義檔、以及 bin，這些東西會放在 <code>$HOME/.dapr</code> 下，如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">~/.dapr ❯ tree -L 2</span><br><span class="line">.</span><br><span class="line">├── bin/</span><br><span class="line">│   ├── daprd             <span class="comment"># dapr runtime, sidecar</span></span><br><span class="line">│   ├── dashboard</span><br><span class="line">│   └── web/</span><br><span class="line">├── components/</span><br><span class="line">│   ├── pubsub.yaml       <span class="comment"># 預設的 pubsub: 也就是 docker ps 裡的 redis</span></span><br><span class="line">│   └── statestore.yaml   <span class="comment"># 預設的 store: 也就是 docker ps 裡的 redis</span></span><br><span class="line">└── config.yaml           <span class="comment"># dapr sidecar 的配置檔</span></span><br><span class="line"></span><br><span class="line">3 directories, 5 files</span><br></pre></td></tr></table></figure>

<p>查看相關 images 的大小：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## Bin 底下的東西大小不大</span></span><br><span class="line">~/.dapr ❯ <span class="built_in">ls</span> -lah</span><br><span class="line">total 254304</span><br><span class="line">drwxrwxrwx  5 rick  staff   160B Feb 26 20:17 .</span><br><span class="line">drwxr-xr-x  5 rick  staff   160B Feb 26 20:17 ..</span><br><span class="line">-rwxrwxrwx  1 rick  staff    92M Feb 26 20:17 daprd</span><br><span class="line">-rwxrwxrwx  1 rick  staff    32M Feb 26 20:17 dashboard</span><br><span class="line">drwxr-xr-x  3 rick  staff    96B Feb 26 20:17 web</span><br><span class="line"></span><br><span class="line"><span class="comment">## docker images，大小約 200MB，不算大。</span></span><br><span class="line">~$ docker images | grep dapr</span><br><span class="line">daprio/dapr                               latest    226e3e87fe9f   2 weeks ago     208MB</span><br></pre></td></tr></table></figure>

<h3 id="Dapr-CLI"><a href="#Dapr-CLI" class="headerlink" title="Dapr CLI"></a>Dapr CLI</h3><p>看看 dapr 版本資訊，亂試 bin 底下的東西：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## Dapr CLI 位置</span></span><br><span class="line">❯ <span class="built_in">which</span> dapr</span><br><span class="line">/usr/local/bin/dapr</span><br><span class="line"></span><br><span class="line"><span class="comment">## Dapr CLI &amp; Runtime 版本</span></span><br><span class="line">❯ dapr --version</span><br><span class="line">CLI version: 1.0.0</span><br><span class="line">Runtime version: 1.0.1</span><br><span class="line"></span><br><span class="line"><span class="comment">## Dapr Runtime</span></span><br><span class="line">~/.dapr/bin ❯ ./daprd --version</span><br><span class="line">1.0.1</span><br><span class="line"></span><br><span class="line"><span class="comment">## 莫名其妙就開啟 dashboard 了，如截圖：</span></span><br><span class="line">~/.dapr/bin ❯ ./dashboard</span><br><span class="line">Dapr Dashboard running on http://localhost:8080</span><br></pre></td></tr></table></figure>
<p>Dashboard 的 Overview 有 Dapr Applications、Components (這兩個應該是 <code>~/.dapr/components</code> 裡的宣告 )、還有 Dapr Configurations</p>
<p><img src="/images/DistributedSystems/dapr/lab01/dapr-dashboard.png"></p>
<p>直接看看 Dapr CLI 有哪一些東西：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">~$ dapr</span><br><span class="line">	 __</span><br><span class="line">    ____/ /___ _____  _____</span><br><span class="line">   / __  / __ <span class="string">&#x27;/ __ \/ ___/</span></span><br><span class="line"><span class="string">  / /_/ / /_/ / /_/ / /</span></span><br><span class="line"><span class="string">  \__,_/\__,_/ .___/_/</span></span><br><span class="line"><span class="string">	      /_/</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">===============================</span></span><br><span class="line"><span class="string">Distributed Application Runtime</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Usage:</span></span><br><span class="line"><span class="string">  dapr [command]</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Available Commands:</span></span><br><span class="line"><span class="string">  completion     Generates shell completion scripts</span></span><br><span class="line"><span class="string">  components     List all Dapr components. Supported platforms: Kubernetes</span></span><br><span class="line"><span class="string">  configurations List all Dapr configurations. Supported platforms: Kubernetes</span></span><br><span class="line"><span class="string">  dashboard      Start Dapr dashboard. Supported platforms: Kubernetes and self-hosted</span></span><br><span class="line"><span class="string">  help           Help about any command</span></span><br><span class="line"><span class="string">  init           Install Dapr on supported hosting platforms. Supported platforms: Kubernetes and self-hosted</span></span><br><span class="line"><span class="string">  invoke         Invoke a method on a given Dapr application. Supported platforms: Self-hosted</span></span><br><span class="line"><span class="string">  list           List all Dapr instances. Supported platforms: Kubernetes and self-hosted</span></span><br><span class="line"><span class="string">  logs           Get Dapr sidecar logs for an application. Supported platforms: Kubernetes</span></span><br><span class="line"><span class="string">  mtls           Check if mTLS is enabled. Supported platforms: Kubernetes</span></span><br><span class="line"><span class="string">  publish        Publish a pub-sub event. Supported platforms: Self-hosted</span></span><br><span class="line"><span class="string">  run            Run Dapr and (optionally) your application side by side. Supported platforms: Self-hosted</span></span><br><span class="line"><span class="string">  status         Show the health status of Dapr services. Supported platforms: Kubernetes</span></span><br><span class="line"><span class="string">  stop           Stop Dapr instances and their associated apps. . Supported platforms: Self-hosted</span></span><br><span class="line"><span class="string">  uninstall      Uninstall Dapr runtime. Supported platforms: Kubernetes and self-hosted</span></span><br><span class="line"><span class="string">  upgrade        Upgrades a Dapr control plane installation in a cluster. Supported platforms: Kubernetes</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Flags:</span></span><br><span class="line"><span class="string">  -h, --help      help for dapr</span></span><br><span class="line"><span class="string">  -v, --version   version for dapr</span></span><br></pre></td></tr></table></figure>

<p>跟很多開發工具都很像，這些後面應該都用得到。</p>
<h2 id="Launch-an-Application"><a href="#Launch-an-Application" class="headerlink" title="Launch an Application"></a>Launch an Application</h2><p>經過上述觀察，試跑一個 dapr application，啥扣都還沒寫，依照文件跑以下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">❯ dapr run --app-id myapp --dapr-http-port 3500</span><br><span class="line">WARNING: no application <span class="built_in">command</span> found.</span><br><span class="line">ℹ️  Starting Dapr with <span class="built_in">id</span> myapp. HTTP Port: 3500. gRPC Port: 62638</span><br><span class="line">ℹ️  Checking <span class="keyword">if</span> Dapr sidecar is listening on HTTP port 3500</span><br><span class="line"></span><br><span class="line">... 中間的 Log 後面整理 ...</span><br><span class="line"></span><br><span class="line">ℹ️  Checking <span class="keyword">if</span> Dapr sidecar is listening on GRPC port 62638</span><br><span class="line">ℹ️  Dapr sidecar is up and running.</span><br><span class="line">✅  You<span class="string">&#x27;re up and running! Dapr logs will appear here.</span></span><br></pre></td></tr></table></figure>

<p>看起來就跑起來了，啟動的 Log 訊息很多，開啟 HTTP Port: 3500. gRPC Port: 62638 兩個。</p>
<p>底下整理針對 Dapr App 跑起來之後的觀察與探索。</p>
<h3 id="檢查-Container"><a href="#檢查-Container" class="headerlink" title="檢查 Container"></a>檢查 Container</h3><p>查看 <code>docker ps</code> 的狀況，會發現還是只有那三個 container！並沒有多了一個叫 <code>myapp</code> 的 container。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">❯ docker ps</span><br><span class="line">CONTAINER ID   IMAGE                 COMMAND                  CREATED       STATUS                    PORTS                              NAMES</span><br><span class="line">bf0fc3456f59   daprio/dapr           <span class="string">&quot;./placement&quot;</span>            10 days ago   Up 52 minutes             0.0.0.0:50005-&gt;50005/tcp           dapr_placement</span><br><span class="line">a2837dfafc81   openzipkin/zipkin     <span class="string">&quot;start-zipkin&quot;</span>           10 days ago   Up 52 minutes (healthy)   9410/tcp, 0.0.0.0:9411-&gt;9411/tcp   dapr_zipkin</span><br><span class="line">64a7fd503cc3   redis                 <span class="string">&quot;docker-entrypoint.s…&quot;</span>   10 days ago   Up 52 minutes             0.0.0.0:6379-&gt;6379/tcp             dapr_redis</span><br></pre></td></tr></table></figure>


<h3 id="探索-Log"><a href="#探索-Log" class="headerlink" title="探索 Log"></a>探索 Log</h3><p>在還沒搞清楚 這個 <code>myapp</code> 到底是啥鬼之前，我仔細的看了前述省略的 Log 內容，整理如下。</p>
<p>整理幾個重點：</p>
<ul>
<li>每一行 Log 都會描述 app_id, instance, scope, type, ver 等資訊，注意 scope 的差異。</li>
<li>scope 出現以下幾種：<ul>
<li>dapr.runtime,<ul>
<li>dapr.runtime.grpc.api, dapr.runtime.grpc.internal</li>
<li>dapr.runtime.http</li>
<li>dapr.runtime.actor, dapr.runtime.actor.internal.placement</li>
</ul>
</li>
<li>dapr.metrics</li>
<li>dapr.contrib</li>
</ul>
</li>
<li>Initialized name resolution to standalone: 看起來是跟 Service Invocation &#x2F; Service Discovery 有關係</li>
<li>component loaded: 載入兩個 compontnets，應該就是 <code>~/.dapr/components</code> 底下的配置<ul>
<li>name: pubsub, type: pubsub.redis</li>
<li>name: statestore, type: state.redis&#x2F;</li>
</ul>
</li>
<li>enabled middleware<ul>
<li>gRPC tracing &#x3D;&gt; scope: dapr.runtime.grpc.api + dapr.runtime.grpc.internal</li>
<li>gRPC metrics &#x3D;&gt; scope: dapr.runtime.grpc.api + dapr.runtime.grpc.internal</li>
<li>metrics http &#x3D;&gt; scope: dapr.runtime.http</li>
<li>tracing http &#x3D;&gt; scope: dapr.runtime.http</li>
</ul>
</li>
<li>起來兩個 listners:<ul>
<li>API gRPC server is running on port 62638</li>
<li>http server is running on port 3500</li>
</ul>
</li>
<li>其他看不懂的：<ul>
<li>actor runtime started</li>
<li>failed to read from bindings</li>
<li>placement tables updated</li>
</ul>
</li>
</ul>
<p>底下是完整的 Log (方便一目瞭然，有些 KV 換行整理說明)：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">INFO[0000] starting Dapr Runtime \</span><br><span class="line">  -- version 1.0.0 \</span><br><span class="line">  -- commit 6314733 \</span><br><span class="line">  app_id=myapp \</span><br><span class="line">  instance=iStar.<span class="built_in">local</span> \</span><br><span class="line">  scope=dapr.runtime \</span><br><span class="line">  <span class="built_in">type</span>=<span class="built_in">log</span> \</span><br><span class="line">  ver=1.0.0</span><br><span class="line"></span><br><span class="line">INFO[0000] <span class="built_in">log</span> level <span class="built_in">set</span> to: info                        app_id=myapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] metrics server started on :62639/             app_id=myapp instance=iStar.<span class="built_in">local</span> scope=dapr.metrics <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] standalone mode configured                    app_id=myapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] app <span class="built_in">id</span>: myapp                                 app_id=myapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] mTLS is disabled. Skipping certificate request and tls validation  app_id=myapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] <span class="built_in">local</span> service entry announced: myapp -&gt; 192.168.2.253:62643  app_id=myapp instance=iStar.<span class="built_in">local</span> scope=dapr.contrib <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] Initialized name resolution to standalone     app_id=myapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] component loaded. name: pubsub, <span class="built_in">type</span>: pubsub.redis/  app_id=myapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] waiting <span class="keyword">for</span> all outstanding components to be processed  app_id=myapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] component loaded. name: statestore, <span class="built_in">type</span>: state.redis/  app_id=myapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] all outstanding components processed          app_id=myapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line"></span><br><span class="line">INFO[0000] enabled gRPC tracing middleware               app_id=myapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime.grpc.api <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] enabled gRPC metrics middleware               app_id=myapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime.grpc.api <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] API gRPC server is running on port 62638      app_id=myapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] enabled metrics http middleware               app_id=myapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime.http <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] enabled tracing http middleware               app_id=myapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime.http <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] http server is running on port 3500           app_id=myapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] The request body size parameter is: 4         app_id=myapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] enabled gRPC tracing middleware               app_id=myapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime.grpc.internal <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] enabled gRPC metrics middleware               app_id=myapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime.grpc.internal <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] internal gRPC server is running on port 62643  app_id=myapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line"></span><br><span class="line">INFO[0000] actor runtime started. actor idle <span class="built_in">timeout</span>: 1h0m0s. actor scan interval: 30s  app_id=myapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime.actor <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">WARN[0000] failed to <span class="built_in">read</span> from bindings: app channel not initialized   app_id=myapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] dapr initialized. Status: Running. Init Elapsed 11.713ms  app_id=myapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] placement tables updated, version: 0          app_id=myapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime.actor.internal.placement <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br></pre></td></tr></table></figure>


<h3 id="傳送請求"><a href="#傳送請求" class="headerlink" title="傳送請求"></a>傳送請求</h3><p>依照文件，發送一個 POST 給 Application，如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">~$ curl -X POST \</span><br><span class="line">  -H <span class="string">&quot;Content-Type: application/json&quot;</span> \</span><br><span class="line">  -d <span class="string">&#x27;[&#123; &quot;key&quot;: &quot;name&quot;, &quot;value&quot;: &quot;Bruce Wayne&quot;&#125;]&#x27;</span> \</span><br><span class="line">  http://localhost:3500/v1.0/state/statestore</span><br></pre></td></tr></table></figure>

<p>到 dapr_redis container 檢查：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">~$ docker <span class="built_in">exec</span> -it dapr_redis redis-cli</span><br><span class="line"></span><br><span class="line">127.0.0.1:6379&gt; keys *</span><br><span class="line">1) <span class="string">&quot;myapp||name&quot;</span></span><br><span class="line">127.0.0.1:6379&gt; hgetall <span class="string">&quot;myapp||name&quot;</span></span><br><span class="line">1) <span class="string">&quot;data&quot;</span></span><br><span class="line">2) <span class="string">&quot;\&quot;Bruce Wayne\&quot;&quot;</span></span><br><span class="line">3) <span class="string">&quot;version&quot;</span></span><br><span class="line">4) <span class="string">&quot;1&quot;</span></span><br></pre></td></tr></table></figure>


<h3 id="用-Dapr-CLI-觀察"><a href="#用-Dapr-CLI-觀察" class="headerlink" title="用 Dapr CLI 觀察"></a>用 Dapr CLI 觀察</h3><p>用 dapr cli 可以觀察到應用程式存在：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">❯ dapr list</span><br><span class="line">  APP ID  HTTP PORT  GRPC PORT  APP PORT  COMMAND  AGE  CREATED              PID</span><br><span class="line">  myapp   3500       56336      0                  11m  2021-03-09 08:51.48  20204</span><br><span class="line"></span><br><span class="line"><span class="comment">## 停掉 myapp</span></span><br><span class="line">❯ dapr stop myapp</span><br><span class="line">✅  app stopped successfully: myapp</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="疑問：我的-App-在哪？"><a href="#疑問：我的-App-在哪？" class="headerlink" title="疑問：我的 App 在哪？"></a>疑問：我的 App 在哪？</h3><p>這個名叫 <code>myapp</code> 的 dapr app 跑起來了，但是，我並沒有指定任何程式給 dapr cli，但是上述的 curl 卻能放東西到 redis，這是怎麼一回事？</p>
<p>這個疑惑先放在這裡，後面會說明。</p>
<h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h2><p>上個跑半天，不知道在做啥鬼，直接開跑官方 QuickStarts 的 <a target="_blank" rel="noopener" href="https://github.com/dapr/quickstarts/tree/v1.0.0/hello-world">Hello World</a> 範例。下圖是官方提供的架構圖，我把相關的 port 都標上去了：</p>
<p><img src="/images/DistributedSystems/dapr/lab01/hello-world.png"></p>
<p>底下快速把 Hello World 跑起來：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">~$ git <span class="built_in">clone</span> https://github.com/dapr/quickstarts.git</span><br><span class="line">~$ <span class="built_in">cd</span> quickstarts/hello-world</span><br><span class="line">~$ npm install</span><br><span class="line">~$ dapr run --app-id nodeapp --app-port 3000 --dapr-http-port 3500 node app.js</span><br></pre></td></tr></table></figure>

<p>同前面的 myapp 一樣，會出現一堆 log，大部分都大同小異，只有最後面會出現這樣的訊息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">❯ dapr run --app-id nodeapp --app-port 3000 --dapr-http-port 3500 node app.js</span><br><span class="line"></span><br><span class="line">ℹ️  Starting Dapr with <span class="built_in">id</span> nodeapp. HTTP Port: 3500. gRPC Port: 63958</span><br><span class="line">INFO[0000] starting Dapr Runtime -- version 1.0.0 -- commit 6314733  app_id=nodeapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] <span class="built_in">log</span> level <span class="built_in">set</span> to: info                        app_id=nodeapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] metrics server started on :63959/             app_id=nodeapp instance=iStar.<span class="built_in">local</span> scope=dapr.metrics <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] standalone mode configured                    app_id=nodeapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] app <span class="built_in">id</span>: nodeapp                               app_id=nodeapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line"></span><br><span class="line">... 略 ...</span><br><span class="line"></span><br><span class="line">INFO[0000] internal gRPC server is running on port 63963  app_id=nodeapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] application protocol: http. waiting on port 3000.  This will block until the app is listening on that port.  app_id=nodeapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">== APP == Node App listening on port 3000!</span><br><span class="line"></span><br><span class="line">INFO[0000] application discovered on port 3000           app_id=nodeapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] application configuration loaded              app_id=nodeapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] actor runtime started. actor idle <span class="built_in">timeout</span>: 1h0m0s. actor scan interval: 30s  app_id=nodeapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime.actor <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] dapr initialized. Status: Running. Init Elapsed 65.36200000000001ms  app_id=nodeapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">INFO[0000] placement tables updated, version: 0          app_id=nodeapp instance=iStar.<span class="built_in">local</span> scope=dapr.runtime.actor.internal.placement <span class="built_in">type</span>=<span class="built_in">log</span> ver=1.0.0</span><br><span class="line">ℹ️  Updating metadata <span class="keyword">for</span> app <span class="built_in">command</span>: node app.js</span><br><span class="line">✅  You<span class="string">&#x27;re up and running! Both Dapr and your app logs will appear here.</span></span><br></pre></td></tr></table></figure>

<p>這次和上次不一樣，多了 <code>== APP == Node App listening on port 3000!</code> 這段訊息，其他差不多都一樣。</p>
<h3 id="Post-Message"><a href="#Post-Message" class="headerlink" title="Post Message"></a>Post Message</h3><p>透過 curl 發送訊息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">~$ curl -XPOST \</span><br><span class="line">  -d @sample.json \</span><br><span class="line">  -H <span class="string">&quot;Content-Type:application/json&quot;</span> \</span><br><span class="line">  http://localhost:3500/v1.0/invoke/nodeapp/method/neworder</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>App 的 Log 出現以下訊息，收到 Post 並且寫入 persistance 了。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">== APP == Got a new order! Order ID: 42</span><br><span class="line"></span><br><span class="line">== APP == Successfully persisted state.</span><br></pre></td></tr></table></figure>

<p>或者透過 Dapr CLI：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">~$ dapr invoke \</span><br><span class="line">    --app-id nodeapp \</span><br><span class="line">    --method neworder \</span><br><span class="line">    --data <span class="string">&#x27;&#123;&quot;data&quot;: &#123; &quot;orderId&quot;: &quot;42&quot; &#125; &#125;&#x27;</span></span><br></pre></td></tr></table></figure>

<p>也會得到同樣的結果。</p>
<h3 id="Post-的位置？"><a href="#Post-的位置？" class="headerlink" title="Post 的位置？"></a>Post 的位置？</h3><p>上述的 URI 長這樣：</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="http://localhost:3500/v1.0/invoke/nodeapp/method/neworder">http://localhost:3500/v1.0/invoke/nodeapp/method/neworder</a></p>
</blockquote>
<ol>
<li>Post 的 port 是 3500 - dapr http port, 而不是 app port 3000</li>
<li>這個結構的規則是如下：</li>
</ol>
<blockquote>
<p>POST&#x2F;GET&#x2F;PUT&#x2F;DELETE <a href="http://localhost:&lt;daprPort&gt;/v1.0/invoke/&lt;appId&gt;/method/&lt;method-name&gt;">http://localhost:&lt;daprPort&gt;/v1.0/invoke/&lt;appId&gt;/method/&lt;method-name&gt;</a></p>
</blockquote>
<p>這是透過 dapr runtime (sidecar) 的 HTTP API 打指定的 app 的 method，其中主要的機制是 <code>Service Invocation</code> 的實作。</p>
<p>詳細的規格參考 <a target="_blank" rel="noopener" href="https://docs.dapr.io/reference/api/service_invocation_api/">Service invoction API reference</a></p>
<p>直接打 port 3000 呢？像這樣：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">curl -XPOST \</span><br><span class="line">  -d @sample.json \</span><br><span class="line">  -H <span class="string">&quot;Content-Type:application/json&quot;</span> \</span><br><span class="line">  http://localhost:3000/neworder</span><br></pre></td></tr></table></figure>

<p>是可以 work 的，就是跳過 Sidecar 直接 invoke Application.</p>
<h3 id="Get-Order"><a href="#Get-Order" class="headerlink" title="Get Order"></a>Get Order</h3><p>上述是打 <code>neworder</code> ，取得 GetOrder 把流程走完，同樣的可以用 curl or dapr cli</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">curl http://localhost:3500/v1.0/invoke/nodeapp/method/order</span><br><span class="line"></span><br><span class="line"><span class="comment"># Dapr CLI</span></span><br><span class="line">dapr invoke \</span><br><span class="line">    --app-id nodeapp \</span><br><span class="line">    --method order \</span><br><span class="line">    --verb GET</span><br></pre></td></tr></table></figure>

<p>回傳結果：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">&quot;orderId&quot;</span>:<span class="string">&quot;42&quot;</span>&#125;</span><br><span class="line">✅  App invoked successfully</span><br></pre></td></tr></table></figure>


<h3 id="PythonApp"><a href="#PythonApp" class="headerlink" title="PythonApp"></a>PythonApp</h3><p>官方的 Hello World 中，最後用 python 寫另一個 service，每秒自動建立新訂單的迴圈。</p>
<p>同樣的把這個 python 當作一個 Darp App 跑起來：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">❯ dapr run --app-id pythonapp cmd /c <span class="string">&quot;python3 app.py&quot;</span></span><br><span class="line"></span><br><span class="line">❯ dapr list</span><br><span class="line">  APP ID     HTTP PORT  GRPC PORT  APP PORT  COMMAND         AGE  CREATED              PID</span><br><span class="line">  pythonapp  49312      49313      0         python3 app.py  5s   2021-03-09 23:36.26  3159</span><br><span class="line">  nodeapp    3500       63958      3000      node app.js     35m  2021-03-09 23:00.42  84911</span><br></pre></td></tr></table></figure>

<hr>
<h1 id="Q-and-A"><a href="#Q-and-A" class="headerlink" title="Q and A"></a>Q and A</h1><p>Q: 無法暫停 Dapr CLI 應用程式？</p>
<ol>
<li>dapr list 檢查狀況</li>
<li>crtl + z 丟到 background</li>
<li>用 <code>kill -9 &lt;PID&gt;</code> 砍掉</li>
</ol>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 正常啟動</span></span><br><span class="line">~$ dapr list</span><br><span class="line">  APP ID  HTTP PORT  GRPC PORT  APP PORT  COMMAND  AGE  CREATED              PID</span><br><span class="line">  my-app  3500       50045      0                  8s   2021-05-08 07:44.23  6942</span><br><span class="line"></span><br><span class="line"><span class="comment"># 啟動異常</span></span><br><span class="line">~$ dapr list</span><br><span class="line">  APP ID  HTTP PORT  GRPC PORT  APP PORT  COMMAND  AGE  CREATED              PID</span><br><span class="line">          0          0          0                  28s  2021-05-08 07:39.41  6475</span><br><span class="line"></span><br></pre></td></tr></table></figure>




<hr>
<h1 id="小結"><a href="#小結" class="headerlink" title="小結"></a>小結</h1><p>簡單整理 Dapr 的初體驗，剛開始還沒搞清楚到底是怎麼運做，到後來漸漸了解整體設計的想法，是一個可以期待、深度研究的設計。</p>
<p><a href="/2021/03/20/DistributedSystems/Experience-Dapr-Run-on-K8s/">下一篇</a> 將整理 Dapr <a target="_blank" rel="noopener" href="https://github.com/dapr/quickstarts/tree/v1.0.0/hello-kubernetes">Run on K8s</a>，以及詳細的運作過程與原理，對於上述 Sidecar 的想法會更清晰，同時也會展開 dapr 幾個很重要的概念，像是 Building Blocks、Components 。</p>
<hr>
<h1 id="延伸閱讀"><a href="#延伸閱讀" class="headerlink" title="延伸閱讀"></a>延伸閱讀</h1><h2 id="Dapr-系列文章"><a href="#Dapr-系列文章" class="headerlink" title="Dapr 系列文章"></a>Dapr 系列文章</h2><ul>
<li><a href="/2021/04/07/DistributedSystems/Dapr-Concepts-and-Designing/">摘要 Dapr 的設計與概念</a></li>
<li><a href="/2021/03/11/DistributedSystems/Experience-Dapr-Hello-World/">Experience Dapr - Hello World</a></li>
<li><a href="/2021/03/20/DistributedSystems/Experience-Dapr-Run-on-K8s/">Experience Dapr - Run on K8s</a></li>
<li><a href="/2021/05/08/DistributedSystems/Experience-Dapr-Secret-Store/">Experience Dapr - Secret Store</a></li>
<li><a href="/2021/07/11/DistributedSystems/Experience-Dapr-PubSub/">Experience Dapr - Pub&#x2F;Sub</a></li>
</ul>
<h2 id="分散式系統系列文章"><a href="#分散式系統系列文章" class="headerlink" title="分散式系統系列文章"></a>分散式系統系列文章</h2><ul>
<li><a href="/2018/06/18/DistributedSystems/Gossip-in-Distributed-Systems/">聊聊分散式系統</a></li>
<li><a href="/2018/08/11/DistributedSystems/Distributed-Consistency-and-Consensus-Algorithm/">分散式一致性問題與共識演算法</a></li>
<li><a href="/2018/08/11/DistributedSystems/CAP-Theorem/">CAP Theorem</a></li>
<li><a href="/2018/06/18/DistributedSystems/Distributed-Message-Systems/">Distributed Message Systems</a></li>
<li><a href="/2018/12/09/DistributedSystems/Eventually-Consistent-Dynamo-NWR/">Eventually Consistent 與 Dynamo NWR 模型</a></li>
<li><a href="/2020/05/16/DistributedSystems/Distributed-Transactions/">淺談分散式交易</a></li>
<li><a href="/2018/06/18/DistributedSystems/Design-Patterns-for-Distributed-Systems/">Design Patterns for Distributed Systems</a></li>
<li><a href="/2019/05/17/About/DDS-zh_TW/">分散式系統設計 - 正體中文版翻譯記事</a></li>
</ul>


				<hr />

				<!-- Facebook in bend of page -->
				<div class="fb-like" data-href="https://rickhw.github.io/2021/03/11/DistributedSystems/Experience-Dapr-Hello-World/" data-width="" data-layout="button_count"
					data-action="like" data-size="small" data-share="true"></div>

				<hr />

				<!-- LikeCoin -->
				<!-- @rickd 2022/09/06 -->
				<!--
				<iframe data-v-b66e9a5a=""
					src="https://button.like.co/in/embed/rick_kyhwang/button?referrer=https://rickhw.github.io/2021/03/11/DistributedSystems/Experience-Dapr-Hello-World/"
					frameborder="0" class="lc-margin-top-64 lc-margin-bottom-32 lc-mobile">
				</iframe>
				<br />
				-->

				<div>
					<center>
						
<div class="pagination">
<ul class="pagination">
	 
				
    	<li class="prev"><a href="/2021/03/17/Container/Java-Obsolete-in-Age-of-Docker/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i>Prev</a></li>
  		

        <li><a href="/categories"><i class="fa fa-archive"></i>Archive</a></li>

		
		   <li class="next"><a href="/2021/01/03/Linux/Shell-and-Bash-Concepts/" class="alignright next">Next<i class="fa fa-arrow-circle-o-right"></i></a></li>         
        
	
</ul>
</div>

					</center>
				</div>


				<!-- comment -->
				
<section id="comment">
  <h2 class="title">Comments</h2>

	<!-- @rick add for facebook -->
	<!-- <div class='fb-comments' data-num-posts='10' data-width='100%' expr:href='data:post.url'/> -->
  <!-- @ricka 2022/09/06, ref: https://developers.facebook.com/docs/plugins/comments/ -->
  <div class="fb-comments" data-order-by="reverse-time" data-href="https://rickhw.github.io/2021/03/11/DistributedSystems/Experience-Dapr-Hello-World/" data-width="100%" data-numposts="10"></div>

  


</section>






			</div>



		</div> <!-- col-md-9/col-md-12 -->

		
		<!-- meta in right -->
		<div class="col-md-3">

	<!-- date -->
	
	<div class="meta-widget">
		<i class="fa fa-clock-o"></i>
		2021/03/11 22:30:00
	</div>
	

	<hr />

	<!-- toc -->
	<div class="meta-widget">
	
	   <a data-toggle="collapse" data-target="#toc"><i class="fa fa-bars"></i> Table of Content</a>
	   <div id="toc" class="toc collapse in">
				<ol class="toc-article"><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#Experience-Dapr"><span class="toc-article-text">Experience Dapr</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Setup-Initial"><span class="toc-article-text">Setup, Initial</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#Dapr-Runtime-and-Components"><span class="toc-article-text">Dapr Runtime and Components</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#Dapr-CLI"><span class="toc-article-text">Dapr CLI</span></a></li></ol></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Launch-an-Application"><span class="toc-article-text">Launch an Application</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E6%AA%A2%E6%9F%A5-Container"><span class="toc-article-text">檢查 Container</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E6%8E%A2%E7%B4%A2-Log"><span class="toc-article-text">探索 Log</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E5%82%B3%E9%80%81%E8%AB%8B%E6%B1%82"><span class="toc-article-text">傳送請求</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E7%94%A8-Dapr-CLI-%E8%A7%80%E5%AF%9F"><span class="toc-article-text">用 Dapr CLI 觀察</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E7%96%91%E5%95%8F%EF%BC%9A%E6%88%91%E7%9A%84-App-%E5%9C%A8%E5%93%AA%EF%BC%9F"><span class="toc-article-text">疑問：我的 App 在哪？</span></a></li></ol></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Hello-World"><span class="toc-article-text">Hello World</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#Post-Message"><span class="toc-article-text">Post Message</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#Post-%E7%9A%84%E4%BD%8D%E7%BD%AE%EF%BC%9F"><span class="toc-article-text">Post 的位置？</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#Get-Order"><span class="toc-article-text">Get Order</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#PythonApp"><span class="toc-article-text">PythonApp</span></a></li></ol></li></ol></li><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#Q-and-A"><span class="toc-article-text">Q and A</span></a></li><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#%E5%B0%8F%E7%B5%90"><span class="toc-article-text">小結</span></a></li><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#%E5%BB%B6%E4%BC%B8%E9%96%B1%E8%AE%80"><span class="toc-article-text">延伸閱讀</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Dapr-%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0"><span class="toc-article-text">Dapr 系列文章</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E5%88%86%E6%95%A3%E5%BC%8F%E7%B3%BB%E7%B5%B1%E7%B3%BB%E5%88%97%E6%96%87%E7%AB%A0"><span class="toc-article-text">分散式系統系列文章</span></a></li></ol></li></ol>
		</div>
	
	</div>

	<hr />

	<!-- categories -->
  
	<div class="meta-widget">
		<a data-toggle="collapse" data-target="#categorys"><i class="fa fa-folder"></i> Categories</a>
    <!--<ul id="categorys" class="tag_box list-unstyled collapse in">-->
      <div>
  <!--<li>-->
    <span class="label label-info"><a href="/categories/Distributed-Systems/" style="color: white">Distributed Systems <span class="badge">20</span></a></span>
  <!--</li>-->
</div>
    <!--</ul>-->
	</div>
	

	<hr />

	<!-- tags -->
	
	<div class="meta-widget">
		<a data-toggle="collapse" data-target="#tags"><i class="fa fa-tags"> Tags</i></a>
    <!--<ul id="tags" class="tag_box list-unstyled collapse in">-->
    <div>
	  	
  <span class="label label-success"><a href="/tags/Microservices/" style="color: white">Microservices <span class="badge">12</span></a></span> <span class="label label-success"><a href="/tags/Dapr/" style="color: white">Dapr <span class="badge">5</span></a></span> <span class="label label-success"><a href="/tags/Sidecar/" style="color: white">Sidecar <span class="badge">5</span></a></span> <span class="label label-success"><a href="/tags/Building-Block/" style="color: white">Building Block <span class="badge">2</span></a></span>
	  </div>
    <!--</ul>-->
	</div>
	


  <hr />

	<div class="meta-widget">
		<!-- v4 -->
		<h4>About</h4>
		
			<li><a href="/2035/01/21/Index/">全站索引</a></li>
		
			<li><a href="/2017/12/29/About/About-This-Blog/">關於這裏</a></li>
		
			<li><a href="/2017/12/29/About/About-Author/">關於作者</a></li>
		
			<li><a href="/2017/09/20/About/Learning-Approaches/">學習法則</a></li>
		
			<li><a href="/2017/11/26/Thinking-in-Essence/">思考本質</a></li>
		
			<li><a href="/2017/12/02/About/Epiphany/">一些領悟</a></li>
		
			<li><a href="/2014/10/26/Management/Classified-Philosophy/">分類哲學</a></li>
		

		<h4>著作</h4>
		
			<li><a target="_blank" rel="noopener" href="https://www.tenlong.com.tw/products/9786264142335">共同著作：軟體品質全面思維 (2025)</a></li>
		
			<li><a href="/2023/07/17/About/2023-SRE-Practice-and-IDP/">個人著作：SRE實踐與開發平台指南</a></li>
		
			<li><a href="/2023/05/23/About/2023-Software-Test-Practice/">共同著作：軟體測試實務 (2023)</a></li>
		
			<li><a href="/2019/05/17/About/DDS-zh_TW/">譯著：分散式系統設計 (2019)</a></li>
		

		<h4>演講</h4>
		
			<li><a target="_blank" rel="noopener" href="https://www.youtube.com/playlist?list=PL63J1r2PBvoiKFC40HTdSrGSQVBqOutOf">演講錄影 @ Youtube</a></li>
		
			<li><a href="/2023/09/09/About/2023-AWS-Career-Exploration-Day/">探索職涯、複利人生 - AWS Career Exploration Day 2023</a></li>
		
			<li><a href="/2023/07/17/About/2023-SRE-Practice-and-IDP/">個人著作 SRE 書友見面會</a></li>
		
			<li><a href="/2023/05/23/About/2023-Software-Test-Practice/">軟體測試實務 - 新書發表會</a></li>
		
			<li><a href="/2022/12/21/About/2022-AWS-Career-Exploration-Day/">探索職涯、成就未來 - AWS Career Exploration Day 2022</a></li>
		
			<li><a href="/2022/08/13/SQA/Path-to-Software-Testing/">從理想、到現實的距離，開啟品味軟體測試之路</a></li>
		
			<li><a href="/2022/05/10/About/2022-SREConf2022/">91APP 在 AWS 上的 SRE 實踐之路</a></li>
		
			<li><a target="_blank" rel="noopener" href="https://www.slideshare.net/rickhwang/2020-aws-summit-aws">在矩陣型組織裡，如何有效管理 AWS 的成本結構與系統架構</a></li>
		
			<li><a target="_blank" rel="noopener" href="https://www.slideshare.net/rickhwang/aws-using-aws-for-disaster-recovery/">災難演練 @ AWS 實戰分享</a></li>
		
			<li><a href="/2019/04/27/DevOps/Introduce-to-Continuous-Delivery-2/">導讀持續交付 2.0 - 談當代軟體交付之虛實融合</a></li>
		
			<li><a href="/2019/03/28/DevOps/DevOpsTaiwan-Meetup-Beginning-in-Artifacts-Management/">聊聊軟體交付的濫觴 談產出物管理</a></li>
		
			<li><a href="/2018/09/12/DevOps/DevOpsDaysTaipei2018-Emergency-And-Incident-Management/">從緊急事件 談 SRE 應變能力的培養</a></li>
		
			<li><a href="/2018/07/18/About/20180718-API-Gateway/">邁向 API 經濟 - API Gateway 導入之旅</a></li>
		
			<li><a href="/2018/05/26/About/201805-Monitoring-Tools-CloudWatch/">Monitoring Tools 大亂鬥 - AWS CloudWatch</a></li>
		
			<li><a href="/2018/03/29/About/2018-Serverless-All-Star/">Ops as Code using Serverless</a></li>
		
			<li><a href="/2017/06/21/AWS/Stategies-System-Monitor_and_CloudWatch/">淺談系統監控與 CloudWatch 的應用</a></li>
		

		<!-- v3 -->
		<!--
		<li><a href="/2018/07/08/Index/">部落格索引</a></li>
		<li><a href="/2017/12/29/About/About-This-Blog/">關於這個部落格</a></li>
		<li><a href="/2017/12/29/About/About-Author/">關於作者</a></li>
		<li><a href="/2017/09/20/About/Learning-Approaches/">學習法則</a></li>
		<li><a href="/2014/12/27/Management/經營之道/">經營之道</a></li>
		<li><a href="/2017/12/02/About/Epiphany/">一些領悟</a></li>
		-->

		<!-- v2 -->
		<!-- <a href="/2017/07/01/Management/Developer-or-Engineer/">軟體開發者 (Software Developer)</a>、<a target="_blank" rel="noopener" href="http://rickmidi.blogspot.com/">音樂愛好者</a>，工作角色經歷 DevOps 三個圈圈職務: Dev / <a href="/categories/軟體測試/">QA</a> / <a href="/categories/DevOps/">Ops</a>。這幾年專注在經營管理、<a href="/2016/10/01/AWS-Study-Roadmap/">AWS</a> / GCP、分散式架構、<a href="/categories/DevOps/">維運、DevOps / SRE</a> 等領域，並活躍於各大社群的活動、演講，著有技術部落格：<a href="https://rickhw.github.io/">Complete Think</a>。工作之外也是業餘音樂愛好者，專注在 吉他、鍵盤、編曲、教學，著有音樂部落格：<a target="_blank" rel="noopener" href="https://rickmidi.blogspot.com/">喝咖啡聊音樂</a>。 -->

		<!-- v1 -->
		<!--
		<li>Software Developer</li>
		<li><a href="/categories/軟體測試/">SQA Manager</a></li>
		<li><a href="/categories/DevOps/">Operation Manager</a></li>
		<li><a target="_blank" rel="noopener" href="http://rickmidi.blogspot.com/">Musician and Guitarist</a></li>
		<li>
			<ol>
				<li>Management</li>
				<li>Cloud / Distributed Systems</li>
				<li>DevOps / SRE / </li>
			</ol>
		</li>
		-->

		<!--
		<h4>Donate</h4>
		<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
		<input type="hidden" name="cmd" value="_s-xclick" />
		<input type="hidden" name="hosted_button_id" value="UUMSV7TXWT2AJ" />
		<input type="image" src="https://www.paypalobjects.com/en_US/TW/i/btn/btn_donateCC_LG.gif" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" />
		<img alt="" border="0" src="https://www.paypal.com/en_TW/i/scr/pixel.gif" width="1" height="1" />
		</form>
		-->

		<h4>Facebook</h4>

		<div class="fb-page" data-href="https://www.facebook.com/completethink/" data-tabs="timeline" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true"><blockquote cite="https://www.facebook.com/completethink/" class="fb-xfbml-parse-ignore"><a target="_blank" rel="noopener" href="https://www.facebook.com/completethink/">Complete Think</a></blockquote></div>

		<a target="_blank" rel="noopener" href="https://aws.amazon.com/developer/community/heroes/rick-hwang/"><img
				src="/images/About/AWS-Hero/community-heroes_logo.png"></a>

		<h4>AWS Certifications</h4>
		<a href="/2016/04/22/AWS/AWS-Certified-Solutions-Architect_Associate/"><img src="/images/About/Solutions_Architect-Associate.jpg"></a>
		<a href="/2016/07/29/AWS/AWS-Certified-SysOps-Administrator/"><img src="/images/About/SysOps-Administrator-Associate.png"></a>
		<a href="/2016/08/20/AWS/AWS-Certified-Developer/"><img src="/images/About/Developer-Associate.png"></a>
	</div>

	<hr />
</div><!-- col-md-3 -->

		

	</div><!-- row -->


    </div>
  </div>


<div class="container-narrow">
    <footer> <p>
  &copy; 2015-2022 Rick Hwang
  
      with help from <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme base on <a target="_blank" rel="noopener" href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.
</p> </footer>
</div>

<!-- container-narrow -->

<div id="gotop">

  <!-- 
    <i class="fa fa-sitemap"></i> <a href="/2017/12/29/About/About-This-Blog/" title="About this blog" target="_blank"]);">關於這裡</a><br />
  
    <i class="fa fa-user"></i> <a href="/2017/12/29/About/About-Author/" title="" target="_blank"]);">關於作者</a><br />
  
    <i class="fa fa-book"></i> <a href="/2017/09/20/About/Learning-Approaches/" title="" target="_blank"]);">學習法則</a><br />
  
    <i class="fa fa-coffee"></i> <a href="https://www.gtcafe.com" title="GTCafe Studio" target="_blank"]);">GTCafe Studio</a><br />
  
    <i class="fa fa-music"></i> <a href="https://www.gtcafe.com/rickmidi/" title="喝咖啡 聊音樂 (v2021)" target="_blank"]);">喝咖啡 聊音樂 (v2021)</a><br />
   -->

  <!-- <h4>About</h4> -->

  
    <li><a href="/2035/01/21/Index/">全站索引</a></li>
  
    <li><a href="/2017/12/29/About/About-This-Blog/">關於這裏</a></li>
  
    <li><a href="/2017/12/29/About/About-Author/">關於作者</a></li>
  
    <li><a href="/2017/09/20/About/Learning-Approaches/">學習法則</a></li>
  
    <li><a href="/2017/11/26/Thinking-in-Essence/">思考本質</a></li>
  
    <li><a href="/2017/12/02/About/Epiphany/">一些領悟</a></li>
  
    <li><a href="/2014/10/26/Management/Classified-Philosophy/">分類哲學</a></li>
  

  <a href="#">▲ TOP ▲ </a>
</div>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/gtcafe-tracking.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>

<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);

// GTCafe API: completet
tracking_update();
</script>



</body>
</html>
