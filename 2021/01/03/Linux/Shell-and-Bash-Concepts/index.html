<!DOCTYPE HTML>
<head>
  <meta charset="utf-8">
  
  <title>Shell and Bash Concepts | Complete Think</title>

  <meta name="author" content="Rick Hwang">
  <meta name="description" content="Shell 是使用者與作業系統溝通的介面，人機介面的形式分成 CLI 與 GUI 兩種。CLI (Command Line Interface) 讓一堆指令可以透過 指令搞 (command script) 變成自動化 程序 (procedure)，提高工作效能，這樣的指令搞我們把它稱為 shell">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- properties -->
  <meta property="og:title" content="Shell and Bash Concepts"/>
  <meta property="og:site_name" content="Complete Think"/>
  <meta property="og:type"      content="website" />
  <meta property="og:url" content="https://rickhw.github.io/2021/01/03/Linux/Shell-and-Bash-Concepts/"/>
  <meta property="og:image" content="/images/Linux/shell-script-cover.png" />
  

  <!-- links -->
  <link rel="alternative" href="/atom.xml" title="Complete Think" type="application/atom+xml">
  <link href="/favicon.png" rel="icon">

  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <!--
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">
  -->
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  
<!--
<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'G-74Y1F3F5W0']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
-->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-74Y1F3F5W0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-74Y1F3F5W0');
</script>



  <!-- Facebook SDK -->
  <!-- ref: https://developers.facebook.com/docs/plugins/like-button -->
  <!-- @rickd 2022/02/24
    <div id="fb-root"></div>
    <script async defer crossorigin="anonymous"
      src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.2&appId=1554905741423841&autoLogAppEvents=1"></script>
  -->
  <!-- @ricka 2022/02/24 -->
  <!-- ref: https://developers.facebook.com/docs/plugins/like-button -->
  <!--
  <div id="fb-root"></div>
  <script async defer crossorigin="anonymous"
    src="https://connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v13.0&appId=1554905741423841&autoLogAppEvents=1"
    nonce="bd9r2mJp"></script>
  -->

  <!-- @ricka 2022/09/06 -->
  <!-- ref: https://developers.facebook.com/docs/plugins/like-button -->
  <div id="fb-root"></div>
  <script async defer crossorigin="anonymous"
    src="https://connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v14.0&appId=1554905741423841&autoLogAppEvents=1"
    nonce="opf2Gext"></script>


<meta name="generator" content="Hexo 6.1.0"></head>


<body>

  
<nav id="main-nav" class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand active" href="/">Complete Think</a>

      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  	
		  		
					<li class='dropdown'>
						<a aria-expanded='false' class='dropdown-toggle' data-toggle='dropdown' href='#' role='button'><i class="fa fa-folder"></i>Categories <span class='caret'/></span></a>
		            	<ul class='dropdown-menu' role='menu'>
		            	
						<li><a href="/categories/AWS/">AWS <sup>82</sup></a></li>
						
						<li><a href="/categories/About/">About <sup>29</sup></a></li>
						
						<li><a href="/categories/Blog/">Blog <sup>5</sup></a></li>
						
						<li><a href="/categories/經營管理/Career/">Career <sup>6</sup></a></li>
						
						<li><a href="/categories/Coding/">Coding <sup>10</sup></a></li>
						
						<li><a href="/categories/Computer-Science/">Computer Science <sup>6</sup></a></li>
						
						<li><a href="/categories/Container/">Container <sup>9</sup></a></li>
						
						<li><a href="/categories/Data/">Data <sup>2</sup></a></li>
						
						<li><a href="/categories/DevOps/">DevOps <sup>43</sup></a></li>
						
						<li><a href="/categories/Distributed-Systems/">Distributed Systems <sup>20</sup></a></li>
						
						<li><a href="/categories/GCP/">GCP <sup>8</sup></a></li>
						
						<li><a href="/categories/Linux/">Linux <sup>9</sup></a></li>
						
						<li><a href="/categories/Misc/">Misc <sup>3</sup></a></li>
						
						<li><a href="/categories/OS-X/">OS X <sup>4</sup></a></li>
						
						<li><a href="/categories/Redmine/">Redmine <sup>6</sup></a></li>
						
						<li><a href="/categories/Reference/">Reference <sup>5</sup></a></li>
						
						<li><a href="/categories/DevOps/SRE/">SRE <sup>25</sup></a></li>
						
						<li><a href="/categories/Software-Engineering/">Software Engineering <sup>10</sup></a></li>
						
						<li><a href="/categories/System-Design/">System Design <sup>3</sup></a></li>
						
						<li><a href="/categories/經營管理/人才管理/">人才管理 <sup>10</sup></a></li>
						
						<li><a href="/categories/經營管理/溝通/">溝通 <sup>9</sup></a></li>
						
						<li><a href="/categories/經營管理/知識管理/">知識管理 <sup>4</sup></a></li>
						
						<li><a href="/categories/經營管理/">經營管理 <sup>61</sup></a></li>
						
						<li><a href="/categories/軟體測試/">軟體測試 <sup>14</sup></a></li>
						
						</ul>
					</li>
		  		
		  	
		  		
		  			<li><a href="/2016/10/01/AWS-Study-Roadmap/" title="AWS Study Notes."><i class="fa fa-cloud"></i>AWS</a></li>
		  		
		  	
		  		
		  			<li><a href="/categories/DevOps/" title="DevOps / SRE"><i class="fa fa-crosshairs"></i>DevOps</a></li>
		  		
		  	
		  		
		  			<li><a href="/2017/07/01/Index-Software-Engineering-In-Practice/" title="設計、開發、測試、維運"><i class="fa fa-cogs"></i>軟體工程</a></li>
		  		
		  	
		  		
		  			<li><a href="/2017/07/01/Index-Management/" title="經營、管理、領導、教練、產品"><i class="fa fa-users"></i>經營管理</a></li>
		  		
		  	
		  		
		  			<li><a href="/categories/Reference/" title="參考書、名詞對照表"><i class="fa fa-folder"></i>字典工具</a></li>
		  		
		  	
			</ul>

			<!-- @ricka: menu in right -->
			<ul class='nav navbar-nav navbar-right'>
				<li class='dropdown'>
					<a aria-expanded='false' class='dropdown-toggle' data-toggle='dropdown' href='#' role='button'><i class="fa fa-folder"></i>About<span class='caret'/></span></a>
					<ul class='dropdown-menu' role='menu'>
					
						<li><a href="/2017/12/29/About/About-This-Blog/" title="About this blog" target="_blank"> <i class="fa fa-sitemap"></i>關於這裡</a></li>
					
						<li><a href="/2017/12/29/About/About-Author/" title="" target="_blank"> <i class="fa fa-user"></i>關於作者</a></li>
					
						<li><a href="/2017/09/20/About/Learning-Approaches/" title="" target="_blank"> <i class="fa fa-book"></i>學習法則</a></li>
					
						<li><a href="https://www.gtcafe.com" title="GTCafe Studio" target="_blank"> <i class="fa fa-coffee"></i>GTCafe Studio</a></li>
					
						<li><a href="https://www.gtcafe.com/rickmidi/" title="喝咖啡 聊音樂 (v2021)" target="_blank"> <i class="fa fa-music"></i>喝咖啡 聊音樂 (v2021)</a></li>
					
					</ul>
				</li>
			</ul>
			<!-- @ricka end -->
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
    <div class="content" style="background-color: white;">
       




	
		<!-- @rick, header of article -->
		<!-- original
		<div class="page-header">
			<h1> Shell and Bash Concepts</h1>
		</div>
		-->

		<div class="panel article_title">
			<div class="panel-heading">
    		<h1> Shell and Bash Concepts</h1>
  		</div>
		</div>

	



<div class="row post">
	<!-- cols -->
	
	<div class="col-md-9">
		

			

			<!-- content -->
			<div class="mypage">
				<!-- ref: https://developers.facebook.com/docs/plugins/like-button -->
				<!-- Facebook in front of page -->
				<!--
				<iframe
					src="https://www.facebook.com/plugins/like.php?href=https%3A%2F%2Frickhw.github.io%2F2021%2F01%2F03%2FLinux%2FShell-and-Bash-Concepts%2F&width=450&layout=standard&action=like&size=small&show_faces=true&share=true&height=80&appId=1554905741423841"
					width="450" height="80"
					style="border:none;overflow:hidden"
					scrolling="no" frameborder="0"
					allowTransparency="true" allow="encrypted-media"></iframe>
				-->

				<!-- <div class="fb-like" data-href="https://rickhw.github.io/2021/01/03/Linux/Shell-and-Bash-Concepts/" data-layout="standard"
					data-action="like" data-size="small" data-show-faces="true" data-share="true"></div>-->

				<div class="fb-like" data-href="https://rickhw.github.io/2021/01/03/Linux/Shell-and-Bash-Concepts/" data-width="" data-layout="button_count"
					data-action="like" data-size="small" data-share="true"></div>

				<hr />

				<p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Shell_(computing)">Shell</a> 是使用者與作業系統溝通的介面，人機介面的形式分成 CLI 與 GUI 兩種。CLI (Command Line Interface) 讓一堆指令可以透過 <code>指令搞 (command script)</code> 變成自動化 <code>程序 (procedure)</code>，提高工作效能，這樣的指令搞我們把它稱為 <code>shell scripts</code>，中文通常翻譯成 <code>程式化腳本</code>、<code>Shell 指令搞</code>。</p>
<p>Shell 本身也是一個程式，但是他並沒有一個表準的型態，不同作業系統使用的也不盡相同。Unix-like 上最基本的 Shell 叫做 <code>sh</code>，全名是 <code>Bouren Shell</code>，是個 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/POSIX">POSIX</a> 標準。Bash 全名是 <code>Bourne Again Shell</code>，是 sh 的 superset。sh 與 bash 有點像 vi vs vim 的關係。</p>
<p>Unix &#x2F; Linux 上很常用 Bash Script 做一些工作，本文整理 Linux 上的 Shell 和 Bash Script 重要的概念 … 等 <code>外在因子</code>。</p>
<blockquote>
<ul>
<li>註一：Shell 中文為 <code>殼</code>，由法國計算機科學家 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Louis_Pouzin">Louis Pouzin</a> 在 1964-1965 年間提出來的概念，後來實作在 Multics 上，而 Multics 後來催促 Unix 的誕生。</li>
<li>註二：中文的 <code>程序</code> 一詞，有時候指的是作業系統的 process 概念，是個實際上佔有資源的單位；有時候也指的是 procedure，指的是一段 <code>作業流程 (workflow)</code>，後面描述視狀況會增加英文註記。</li>
</ul>
</blockquote>
<span id="more"></span>


<hr>
<h1 id="Shell-Concepts"><a href="#Shell-Concepts" class="headerlink" title="Shell Concepts"></a>Shell Concepts</h1><h2 id="Shell-是什麼？"><a href="#Shell-是什麼？" class="headerlink" title="Shell 是什麼？"></a><code>Shell</code> 是什麼？</h2><p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Shell_(computing)">Shell</a> 是作業系統的專有名詞，指的是使用者與作業系統核心 (Kernel) 溝通的橋樑，負責將使用者要執行的指令，帶給 Kernel 處理。而 Kernel 則是負責跟硬體溝通，可以說是作業系統核心的前置處理器 (Pre-processoer)。</p>
<p>Shell 分成兩種，一種是處理 CLI (Command Line Interface)，一種是處理 GUI (Graphic User Interface)。現今流行的兩大主流作業系統個別的 Shell 如下整理：</p>
<p>Unix-Like:</p>
<ul>
<li>Linux 底下 CLI 最常見的有 bash、zsh、csh、tsh … 等，而 GUI 則是 X Window</li>
<li>macOS 的 Shell 則由 Finder、SystemUIServer、Dock、Mission Controller 組成。<ul>
<li>iTerm2, terminal.app 不是 Shell, 他們都是應用程式.</li>
<li>macOS 的 CLI Shell 則是 bash</li>
</ul>
</li>
</ul>
<p>Microsoft:</p>
<ul>
<li>MS-DOS 底下的 command.com</li>
<li>Windows 則使用 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Windows_shell">Windows Shell</a>，屬於 GUI Shell，它則包含了 Start Menu、Explorer、Task Bar … 等<ul>
<li>cmd.exe 則是 Windows 底下的 cli shell.</li>
</ul>
</li>
</ul>
<h2 id="Shebang"><a href="#Shebang" class="headerlink" title="Shebang"></a>Shebang</h2><p>Shell Script 使用 <code>#!</code> 告訴 shell 這個 script 使用哪個 interpreter 解析。<code>#!</code> 這個組合符號稱為 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Shebang_(Unix)">Shebang</a>，Shebang 的 syntax:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!interpreter [optional-arg]</span></span><br></pre></td></tr></table></figure>

<p>規則描述如下：</p>
<ol>
<li>Shebang 必須在 script 的第一行</li>
<li>必須使用 shebang <code>#!</code> 作為開頭</li>
<li>Shebang 後面可以接一個空格 (space)，但不是必要的</li>
<li>Shebang 後面接 interpreter binary 的絕對路徑，像是 <code>/bin/sh</code>、<code>/bin/bash</code></li>
<li>Interpreter 可以額外帶入參數</li>
</ol>
<p>舉例：</p>
<ul>
<li><code>#!/bin/bash</code>: 使用 bash 作為 interpreter<ul>
<li><code>#! /bin/bash</code> Shebang 與 interpreter 空一個是可以的。</li>
<li><code>#!/bin/sh</code>: 使用 sh 作為 interpreter</li>
</ul>
</li>
<li><code>#!/usr/bin/env bash</code>: 使用 <code>env</code> 自動找到 bash 的位置。 </li>
<li><code>#!/bin/bash -x</code>: 開啟 bash trace 模式，等於在 script 裡面使用 <code>set +</code> <ul>
<li><code>#!/bin/bash -v</code>: 開啟 bash verbose 模式</li>
<li><code>#!/bin/bash -xv</code>: 同時開啟 bash trace 和 verbose 模式</li>
</ul>
</li>
<li><code>#!/bin/false</code>: 啥都不做，同時回傳 non-zero 的 exit code.</li>
</ul>
<h2 id="執行-Shell-Script"><a href="#執行-Shell-Script" class="headerlink" title="執行 Shell Script"></a>執行 Shell Script</h2><p>可以透過以下兩種方式執行 Shell Script:</p>
<ol>
<li>使用 Shebang 指定的 interpreter 解譯 script: <code>./script.sh</code></li>
</ol>
<ul>
<li>前提是檔案的模式為 executable (可執行)</li>
</ul>
<ol>
<li>如果想忽略 Shebang 的宣告，使用指定的 interpreter 解譯 script: <code>bash script.sh</code></li>
</ol>
<ul>
<li>如果原本 Shebang 宣告使用 <code>#!/bin/sh</code>，那麼就會被改成使用 bash</li>
</ul>
<ol>
<li>使用 <code>#!/usr/bin/env xxx</code></li>
</ol>
<ul>
<li>不同 unix-like 環境的 shell interpreter 路徑不見得一致，如果要考慮可移植性的話，shebang 宣告成 <code>#!/usr/bin/env bash</code>，runtime 自動找到 interpreter 的位置。</li>
</ul>
<h2 id="IPC-pipes-stdin-stdout-stderr"><a href="#IPC-pipes-stdin-stdout-stderr" class="headerlink" title="IPC: pipes, stdin, stdout, stderr"></a>IPC: pipes, stdin, stdout, stderr</h2><p>兩個 process 之間需要溝通時，就需要有機制配合，這個過程稱為 <code>Inter-Process Communication (IPC)</code>。Shell Programming 的 Standard In &#x2F; Out &#x2F; Error 是所有程序 (Process) 對外溝通的標準介面，然後透過 <code>Pipe (管線)</code> 可以串接這三個資料源頭，或者透過 <code>檔案 (File)</code>。</p>
<p>先整理三個 Standard 的基本概念：</p>
<ul>
<li>標準輸入 (standard input, stdin, 代碼為 0): 程式執行所需要的輸入資料</li>
<li>標準輸出 (standard output, stdout, 代碼為 1): 程式正常執行過程中，產生的輸出資料。</li>
<li>標準錯誤輸出 (standard error output, stderr, 代碼為 2): 程式發生錯誤時，給使用者用的訊息、或呈現程式狀態用的訊息。</li>
</ul>
<p>Process 之間的溝通過程中會有以下狀況：</p>
<ol>
<li>stdin: 接收其他 Process 提供的資訊，當作 stdin，而這個 stdin 可能是由另一個 Process 的 stdout or stderr 提供。</li>
<li>stdout: 產生輸出結果，給下一個 Process 使用，或者寫到檔案。</li>
<li>stderr: 將錯誤結果，給下一個 Process 使用，或者寫到檔案。</li>
<li>上述的過程，在 Unix 裡通常都會透過 <code>pipe</code> 作為溝通的 <code>管道</code></li>
</ol>
<ul>
<li>unix 的 pipe 分成 anonymous pipe 和 named pipe 兩種<ul>
<li>經常看到的 <code> a | b</code> 就是 anonymous pipe，專屬 process</li>
<li>透過 <code>mkfifo /tmp/test</code> 可以建立 named pipe，很多 process 可以共用</li>
</ul>
</li>
</ul>
<p>通常他們三個在 pipe 過程可以透過 Terminal (Console) 或者寫入檔案，常用的如下：</p>
<ul>
<li><code>大於 &gt;</code>：<ul>
<li>代表左邊指令的結果，輸出並 <code>覆寫</code> 到右邊檔案位置</li>
<li>例如：<code>cmd &gt; filename</code></li>
<li>這個做法檔案會被清空，然後重新寫入</li>
</ul>
</li>
<li><code>兩個大於 &gt;&gt;</code>：<ul>
<li>代表左邊指令的結果，輸出並 <code>附加</code> 到右邊檔案位置</li>
<li>例如：<code>cmd &gt;&gt; filename</code></li>
<li>不會清空檔案內容，直接附加在最後</li>
</ul>
</li>
<li><code>小於 &lt;</code>:<ul>
<li>把右邊的內容當作 input，送給左邊的 cli</li>
<li>範例：<code>cmd &lt; list</code></li>
</ul>
</li>
</ul>
<p>Unix 裡透過 pipe (|) 讓 stdin, stdout, stderr 相互傳導，下表整理詳細的</p>
<p>下圖整理自 <a target="_blank" rel="noopener" href="https://askubuntu.com/questions/420981/how-do-i-save-terminal-output-to-a-file/731237">How do I save terminal output to a file?</a> 中網友的回答：</p>
<p><img src="/images/Linux/stdout-error-syntax.png"></p>
<blockquote>
<p>註：IPC 的通訊實作方式很多種，包含 <code>Shared Memory</code>, <code>Message Passing</code>, <code>Sockets</code>, <code>RPC</code> … 等。pipe 是 unix 上第一個實作的 IPC 介面，在 Unix &#x2F; Windows 有個別的實作，整理如下：</p>
<ul>
<li>unix: <ul>
<li>anonymous pipe: 只能在同一台機器上的不同 process 使用。</li>
<li>named pipe: call FIFO, communicate in same machine</li>
</ul>
</li>
<li>windows: <ul>
<li>ordinary pipes: called anonymous pipe</li>
<li>named pipes: Bi-directional, 可以跨機器溝通。</li>
</ul>
</li>
</ul>
<p>上述詳細可以參閱 <code>Operating System Concepts</code> 第三章的介紹。</p>
</blockquote>
<h2 id="Shell-Variables"><a href="#Shell-Variables" class="headerlink" title="Shell Variables"></a>Shell Variables</h2><p>在 POSIX 定義以下變數應該被初始化的，這些變數都是 built-in 的，整理如下：</p>
<ul>
<li>ENV</li>
<li>HOME</li>
<li>IFS: Input Field Separators</li>
<li>LANG</li>
<li><code>LC_*</code>: LC_ALL, LC_COLLATE, LC_CTYPE, LC_MESSAGE</li>
<li>LINENO</li>
<li>NLSPATH</li>
<li>PATH</li>
<li>PPID</li>
<li>PS1, PS2, PS4</li>
<li>PWD</li>
</ul>
<p>上述變數詳細參閱： <a target="_blank" rel="noopener" href="https://pubs.opengroup.org/onlinepubs/009695399/utilities/xcu_chap02.html#tag_02_05_02">2.5.3 Shell Variables</a></p>
<h2 id="Special-Shell-Variables"><a href="#Special-Shell-Variables" class="headerlink" title="Special Shell Variables"></a>Special Shell Variables</h2><p>除了上一段提到的變數，還有一些特殊符號構成的變數：</p>
<ul>
<li><code>$1 - $9</code>: 參數的位置</li>
<li><code>$0</code>: 目前 script 的名稱</li>
<li><code>$?</code>: 上一個 command 的 exit status</li>
<li><code>$#</code>: 被呼叫的 script 的參數位置</li>
<li><code>$$</code>: 目前的程序的 PID (Process ID)</li>
<li><code>$!</code>: 最後一個在背景執行的 process id</li>
<li><code>$-</code>: 使用 set 設定的 flag </li>
<li><code>$*</code>: script 所有的參數 (args) 列表</li>
<li><code>$@</code>: 同上</li>
</ul>
<hr>
<h1 id="Bash-Concepts"><a href="#Bash-Concepts" class="headerlink" title="Bash Concepts"></a>Bash Concepts</h1><p>Bash 全名 <code>Bourne-Again Shell</code>，是大多數 linux 預設的 shell，底下整理一些使用 Bash 重要的觀念。</p>
<blockquote>
<p>註：除了 bash，其他老牌子 shell 還有 sh, csh, ksh … 等，新一代的有 dash、rbash、tmux … 等。可以透過 <code>cat /etc/shells</code> 看到目前作業系統支援哪一些 shell。</p>
</blockquote>
<h2 id="初始程序：Login-Shell-Non-Login-Shell"><a href="#初始程序：Login-Shell-Non-Login-Shell" class="headerlink" title="初始程序：Login Shell, Non-Login Shell"></a>初始程序：Login Shell, Non-Login Shell</h2><p><code>初始程序 (init process)</code> 是電腦系統很重要的課題，很多地方都有初始程序，像是電腦主機版 BIOS 開機程序、Bootloader、作業系統開機程序 (pid&#x3D;0)、K8s pod 的初始程序、Docker container 初始程序、登入程序、瀏覽器開啟程序、網路連線初始程序 (TCP Handshaking) …</p>
<p>Linux 的登入程序是寫 shell script 時需要了解的，剛開始在用 cron job 跑 script 時很容易遇到讀不到環境變數的問題，其實就是 shell 的初始程序的問題。</p>
<p>Shell 初始程序分成 1) <code>login shell</code> 和 2) <code>non-login shell</code> 兩種，兩種都有各自所屬的初始程序 (procedure)，這些程序稱為 <code>rc (run command)</code> 程序。常見的 cron job 拿不到環境變數就是初始程序不一樣造成；另一個常見的例子就是用 ssh 跑 remote procedure ，這個過程也有個 login 的過程，同樣的也會遇到 shell login 初始程序的問題。</p>
<blockquote>
<p>註一：centos&#x2F;redhat 與 debian&#x2F;ubuntu 的 crontab 對於 login shell 有不同的初始方式，所以有些人可能使用 crontab 沒遇到上述問題。</p>
</blockquote>
<p>login shell 的 rc 流程如下：</p>
<ol>
<li><code>/etc/profile</code></li>
<li><code>/etc/profile.d/*.sh</code></li>
<li><code>~/.bash_profile</code></li>
<li><code>~/.bashrc</code> (invoked by $HOME&#x2F;.bash_profile)</li>
<li><code>/etc/bashrc</code></li>
</ol>
<p>而 non-login shell 只有後面的三個：</p>
<ol>
<li><code>~/.bash_profile</code></li>
<li><code>~/.bashrc</code> (invoked by $HOME&#x2F;.bash_profile)</li>
<li><code>/etc/bashrc</code></li>
</ol>
<p>了解這些次序之後，可以從原始碼中了解登入初始的細節。</p>
<p>crontab 與 ssh, su 切換身份時，先確認他們是用什麼方式登入。</p>
<h3 id="使用-su-切換身份"><a href="#使用-su-切換身份" class="headerlink" title="使用 su 切換身份"></a>使用 su 切換身份</h3><p>延續前面提到的問題，以下整理使用 su 要注意的觀念。</p>
<p>SysOp 常需要用 sudo 配合 su 切換身份到 root，很常看到下這樣的指令：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~$ sudo su</span><br><span class="line">root@lab99:/home/ubuntu<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p>之後，就開始直接用 root 身份做事情，同樣的切換方法，有時候也會看到以下的切法：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~$ sudo su -</span><br><span class="line">root@lab99:~<span class="comment">#</span></span><br></pre></td></tr></table></figure>

<p>這兩個有什麼差別？注意切換之後的 #提示訊息 (prompt) 以及現在位置 (pwd)，觀察兩者 #環境變數 (env) 的差異。<br>寫 script 需要直接切換身份執行該身份的指令，通常會是：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~$ su &lt;username&gt; -c <span class="string">&quot;your_script.sh or cli&quot;</span></span><br><span class="line">~$ su - &lt;username&gt; -c <span class="string">&quot;your_script.sh or cli&quot;</span></span><br></pre></td></tr></table></figure>

<p>這兩個 script 可能會得到不同的結果，所以因為初始程序的不一樣，造成可用環境變數不一樣，然後 script 在 runtime 很容易造成問題。<br>這兩個切換方式的唯一差別，就在後者的 su 多了 –login 參數 (shortcut as -)，這個參數就是切換時使用 login shell 方式登入。前者是 non-login shell，只有完成部分程序，所以看起來少了一些東西；後者就如同真的使用 root 登入一樣。</p>
<p>其實 su 的 <a target="_blank" rel="noopener" href="https://man7.org/linux/man-pages/man1/su.1.html">manual</a> 也建議通常要帶 <code>--login</code> 參數，也就是使用 login shell 方式切換，避免因為 non-login shell 造成額外的問題。摘錄原文如下：</p>
<blockquote>
<p>For backward compatibility, su defaults to not change the current directory and to only set the environment variables HOME and SHELL (plus USER and LOGNAME if the target user is not root).  It is recommended to always use the –login option (instead of its shortcut -) to avoid side effects caused by mixing environments.</p>
</blockquote>
<h3 id="如何知道現在是哪一種方式？"><a href="#如何知道現在是哪一種方式？" class="headerlink" title="如何知道現在是哪一種方式？"></a>如何知道現在是哪一種方式？</h3><p>除了 prompt 可以觀察，要用什麼方式知道現在的 login shell？可以透過以下方式確認現在是用哪一種方式：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">~$ <span class="built_in">echo</span> <span class="variable">$0</span></span><br><span class="line">-bash <span class="comment"># 有 hyphen - 開頭，是 login shell</span></span><br><span class="line">~$ sudo su -</span><br><span class="line">~$ <span class="built_in">echo</span> <span class="variable">$0</span></span><br><span class="line">-su <span class="comment"># sudo su - 切換 login shell</span></span><br><span class="line">~$ <span class="built_in">echo</span> <span class="variable">$0</span></span><br><span class="line">bash <span class="comment"># 沒有 hyphen - 開頭，是 non login shell</span></span><br><span class="line">~$ sudo su</span><br><span class="line">~$ <span class="built_in">echo</span> <span class="variable">$0</span></span><br><span class="line">su <span class="comment"># sudo su 切換 non login shell</span></span><br></pre></td></tr></table></figure>


<!--
## Login Shell 的生命週期

這邊提到的大多都是 Login 時會發生的事情，並沒有整理 Logout 會發生什麼事情。

試想，如果已經有一些程序 (processes) 在背景執行，這些程序由一個父程序呼叫，但是還沒結束，整個 tty 就結束了，那麼會發生什麼事情？
-->


<h2 id="Bash-Built-in-Commands"><a href="#Bash-Built-in-Commands" class="headerlink" title="Bash Built-in Commands"></a>Bash Built-in Commands</h2><p>Shell Script 作為使用者與 Kernel 的介面，使用上經常會配合其他工具，像是 sed, awk, find, ls, … 等，一起使用，透過這樣的方式與系統溝通，這些工具都可以在 <code>/bin/</code>, <code>/usr/bin</code> 底下找到實際的執行檔。但有些指令不存在於上述位置，而是由 bash 內建提供的，整理常用的如下：</p>
<ul>
<li>alias</li>
<li>bind</li>
<li>declare</li>
<li>echo</li>
<li>enable</li>
<li>help</li>
<li>let</li>
<li>local</li>
<li>logout</li>
<li>printf</li>
<li>read</li>
<li>readarray</li>
<li>source</li>
<li>type</li>
<li>typeset</li>
<li>ulimit</li>
<li>unalias</li>
</ul>
<p>上述詳細參見：<a target="_blank" rel="noopener" href="https://www.gnu.org/software/bash/manual/html_node/Bash-Builtins.html">Bash Builtin Commands</a></p>
<p>除了 bash 內建的， sh 也內建一些指令，不難發現，這些都是構成一個 <code>程式語言</code> 的基礎元素，整理如下：</p>
<ol>
<li><code>:</code> (a colon)</li>
<li><code>.</code> (a period)</li>
<li>break</li>
<li>cd</li>
<li>continue</li>
<li>eval</li>
<li>exec</li>
<li>exit</li>
<li>export</li>
<li>getopts</li>
<li>hash</li>
<li>pwd</li>
<li>readonly</li>
<li>return</li>
<li>shift</li>
<li>test</li>
<li><code>[</code></li>
<li>times</li>
<li>trap</li>
<li>umask</li>
<li>unset</li>
</ol>
<p>上述詳細參見： <a target="_blank" rel="noopener" href="https://www.gnu.org/software/bash/manual/html_node/Bourne-Shell-Builtins.html#Bourne-Shell-Builtins">Bourne Shell Builtins</a></p>
<h2 id="IFS"><a href="#IFS" class="headerlink" title="IFS"></a>IFS</h2><p>IFS 是 <code>Internal Field Separator</code> 的縮寫，是 bash 的特殊變數，用在做字串分割 (splitting) 時做為切割字元 (delimiter)，預設值是 space, tab 與 newline 。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># macOS</span></span><br><span class="line">~$ <span class="built_in">echo</span> <span class="string">&quot;[<span class="variable">$&#123;IFS&#125;</span>]&quot;</span></span><br><span class="line">[</span><br><span class="line">]</span><br><span class="line">❯ <span class="built_in">echo</span> -n <span class="string">&quot;<span class="variable">$IFS</span>&quot;</span> | <span class="built_in">od</span> -a -t x1 -c</span><br><span class="line">0000000   sp  ht  <span class="built_in">nl</span> nul</span><br><span class="line">          20  09  0a  00</span><br><span class="line">              \t  \n  \0</span><br><span class="line">0000004</span><br><span class="line"></span><br><span class="line"><span class="comment"># Ubuntu 18.04</span></span><br><span class="line">~$ <span class="built_in">echo</span> <span class="string">&quot;[<span class="variable">$&#123;IFS&#125;</span>]&quot;</span></span><br><span class="line">[</span><br><span class="line">]</span><br><span class="line">~$ <span class="built_in">echo</span> -n <span class="string">&quot;<span class="variable">$IFS</span>&quot;</span> | <span class="built_in">od</span> -a -t x1 -c</span><br><span class="line">0000000  sp  ht  <span class="built_in">nl</span></span><br><span class="line">         20  09  0a</span><br><span class="line">             \t  \n</span><br><span class="line">0000003</span><br></pre></td></tr></table></figure>

<blockquote>
<p>od 是 Octal Dump, unix 底下顯示檔案內容格式的工具，可以顯示八進位、十六進位等格式。</p>
</blockquote>
<hr>
<h1 id="Q-and-A"><a href="#Q-and-A" class="headerlink" title="Q and A"></a>Q and A</h1><h2 id="sh-vs-bash-的差異？"><a href="#sh-vs-bash-的差異？" class="headerlink" title="sh vs bash 的差異？"></a>sh vs bash 的差異？</h2><p>如開頭提到，<code>sh vs bash</code> 大概就是 <code>vi vs vim</code> 的差別。前者是基本的實作，包含所有 built-in 的必要功能，後者則多了一些延伸功能。</p>
<p>下圖是網友整理的 sh, csh, ksh, bash, tcsh 功能比較表：</p>
<p><img src="/images/Linux/shell-comparision.jpg"><br>資料來源：<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/5725296/difference-between-sh-and-bash">Difference between sh and bash</a></p>
<p>從 macOS (v10.15.7) 看看兩者差異：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> -al /bin/sh</span><br><span class="line">-rwxr-xr-x  1 root  wheel  31440 Sep 22 08:30 /bin/sh</span><br><span class="line"><span class="built_in">ls</span> -al /bin/bash</span><br><span class="line">-r-xr-xr-x  1 root  wheel  623472 Sep 22 08:30 /bin/bash</span><br></pre></td></tr></table></figure>

<p>從 ubuntu 18.04 查看：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~<span class="comment"># ls -l /bin/sh</span></span><br><span class="line">lrwxrwxrwx 1 root root 4 Jul 25  2018 /bin/sh -&gt; dash</span><br></pre></td></tr></table></figure>

<p>dash 是 ubuntu 預設的 shell，全名是 <code>Debian Almquist Shell</code>。</p>
<h2 id="這年代還需要-Shell-Programming？"><a href="#這年代還需要-Shell-Programming？" class="headerlink" title="這年代還需要 Shell Programming？"></a>這年代還需要 Shell Programming？</h2><p>雲端流行的時代，很多高階工具 (像是 AWS CDK)、宣告式 (Ansible、IaC、K8s) 概念流行，有人就會問：</p>
<blockquote>
<p>還需要寫 Shell Scripts？</p>
</blockquote>
<p>這問題應該要這樣問：</p>
<blockquote>
<p>你是開發應用程式？還是系統程式？</p>
</blockquote>
<p>先解釋什麼是 <code>應用程式</code>，什麼是 <code>系統程式</code>？</p>
<ul>
<li><code>應用程式</code>：給終端使用者使用 (End-User) 的程式，跟提供人機介面，商業邏輯打交道。<ol>
<li>舉凡各種 Mobile APP、Web APP &#x3D; Frontend + Backend</li>
<li>Desktop APP，像是 Slack、Browser、Git Client、Final Cut .. etc.</li>
</ol>
</li>
<li><code>系統程式</code>：給應用程式開發者使用的，他主要會跟作業系統德核心 (Kernel) 打交道，打交道有兩種方式：<ol>
<li>直接透過 System Call 跟作業系統 Kernel 打交道，像是寫驅動程式、處理網路封包、處理 I&#x2F;O、處理影像 … </li>
<li>間接跟核心打交道：透過 Shell Script 與系統工具整合，像是使用 ToolChain 執行應用程式編譯，最常見的就是編譯 Android APP。</li>
<li>整合應用：管理應用程式生命週期，像是 Linux 的初始應用程式 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Init#SYSV">sysvinit</a>，還有 build 過程的 scripts.</li>
</ol>
</li>
</ul>
<p>一開始提到 Shell 人機介面的形式分成 CLI 與 GUI 兩種：GUI &amp; CLI。GUI 對人的操作來講雖然很方便，但是以工作效率話來講，卻是很沒效率的。Linux 一開始就是以 Bash 為主，後來也有 X-Window 的 GUI 標準。微軟作業系統一開始則以 GUI 為主，如果要自動化配置，就要仰賴像是 <a target="_blank" rel="noopener" href="https://www.autoitscript.com/site/autoit/">autoit</a> 這種圖形控制器來自動畫。但是後來微軟弄出 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/PowerShell">PowerShell</a>，用於自動化組態管理，提高效率，其目的跟 autoit &#x2F; bash 其實是類似的。</p>
<!--
通常會把這兩類的軟體工程師分別稱為：

* 應用開發者、應用軟體工程師：細分就是前端、後端、資料庫
* 系統開發者、系統軟體工程師：

寫 `應用程式 (Application Programs)` 的開發者通常不常碰 Shell Script，他們專注的是應用場景，不太需要跟作業系統打交道。大多使用 Shell Script 大多都是要做建置 (Build) 的時候，需要準備相關的依賴函式庫、相關的建置工具 (Toolchain)，主要程式的編譯、打包 ... 等程序。而這些程序  (procedure) 則透過 IDE 去發動執行，Web 應用則透過 CI Tools 執行。大多的 IDE 開發環境，都會把上述建置流程做整合性的功能，開發者只要在 IDE 上點選特定的 Button 就可以完成最常使用的程序。而 Web 應用程式依照部署需求，則由維護 Pipeline 開發者個別去開發。

寫 `系統程式 (System Programs)`，通常需要跟作業系統打交道。


真正的狀況是：

> 那些 IDE 背後運作的程序，就是由系統工程師設計好給應用開發者使用。

如果你要負責開發工具給應用程式開發者使用，那麼 Shell Script 則是必要的工具。
-->



<!--


## Q: 如果連線突然中斷，那透過 Bash 跑起來的 Process 會怎樣？

中斷可能有幾種常見情境：

* 實體網路線中斷
* Wi-Fi 中斷
* VPN 撥接中斷



-->


<hr>
<h1 id="延伸閱讀"><a href="#延伸閱讀" class="headerlink" title="延伸閱讀"></a>延伸閱讀</h1><h2 id="站內延伸"><a href="#站內延伸" class="headerlink" title="站內延伸"></a>站內延伸</h2><ul>
<li><a href="/2019/02/27/ComputerScience/IO-Models/">Study Notes - I&#x2F;O Models</a></li>
<li><a href="/2017/01/23/Management/Cost-In-Context-Switch/">Cost in Context Switch</a></li>
<li><a href="/2020/09/12/ComputerScience/Synchronization/">淺談同步機制</a></li>
</ul>
<h2 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h2><ul>
<li>[Manual] <a target="_blank" rel="noopener" href="https://www.gnu.org/software/bash/manual/html_node/index.html">Bash Reference Manual</a> - GNU</li>
<li>[Book] <a target="_blank" rel="noopener" href="https://linux.die.net/abs-guide/index.html">Advanced Bash-Scripting Guide</a> - An in-depth exploration of the art of shell scripting, by Mendel Cooper</li>
<li>[Book] <a target="_blank" rel="noopener" href="https://tldp.org/LDP/Bash-Beginners-Guide/html/index.html">Bash Guide for Beginners</a> - by Machtelt Garrels</li>
<li><a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/5725296/difference-between-sh-and-bash">Difference between sh and bash</a></li>
<li><a target="_blank" rel="noopener" href="https://www.quora.com/Why-do-people-still-write-shell-scripts">Why do people still write shell scripts?</a></li>
</ul>


				<hr />

				<!-- Facebook in bend of page -->
				<div class="fb-like" data-href="https://rickhw.github.io/2021/01/03/Linux/Shell-and-Bash-Concepts/" data-width="" data-layout="button_count"
					data-action="like" data-size="small" data-share="true"></div>

				<hr />

				<!-- LikeCoin -->
				<!-- @rickd 2022/09/06 -->
				<!--
				<iframe data-v-b66e9a5a=""
					src="https://button.like.co/in/embed/rick_kyhwang/button?referrer=https://rickhw.github.io/2021/01/03/Linux/Shell-and-Bash-Concepts/"
					frameborder="0" class="lc-margin-top-64 lc-margin-bottom-32 lc-mobile">
				</iframe>
				<br />
				-->

				<div>
					<center>
						
<div class="pagination">
<ul class="pagination">
	 
				
    	<li class="prev"><a href="/2021/03/11/DistributedSystems/Experience-Dapr-Hello-World/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i>Prev</a></li>
  		

        <li><a href="/categories"><i class="fa fa-archive"></i>Archive</a></li>

		
		   <li class="next"><a href="/2020/10/18/DevOps/Deploy-on-Friday-or-Not/" class="alignright next">Next<i class="fa fa-arrow-circle-o-right"></i></a></li>         
        
	
</ul>
</div>

					</center>
				</div>


				<!-- comment -->
				
<section id="comment">
  <h2 class="title">Comments</h2>

	<!-- @rick add for facebook -->
	<!-- <div class='fb-comments' data-num-posts='10' data-width='100%' expr:href='data:post.url'/> -->
  <!-- @ricka 2022/09/06, ref: https://developers.facebook.com/docs/plugins/comments/ -->
  <div class="fb-comments" data-order-by="reverse-time" data-href="https://rickhw.github.io/2021/01/03/Linux/Shell-and-Bash-Concepts/" data-width="100%" data-numposts="10"></div>

  


</section>






			</div>



		</div> <!-- col-md-9/col-md-12 -->

		
		<!-- meta in right -->
		<div class="col-md-3">

	<!-- date -->
	
	<div class="meta-widget">
		<i class="fa fa-clock-o"></i>
		2021/01/03 15:37:03
	</div>
	

	<hr />

	<!-- toc -->
	<div class="meta-widget">
	
	   <a data-toggle="collapse" data-target="#toc"><i class="fa fa-bars"></i> Table of Content</a>
	   <div id="toc" class="toc collapse in">
				<ol class="toc-article"><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#Shell-Concepts"><span class="toc-article-text">Shell Concepts</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Shell-%E6%98%AF%E4%BB%80%E9%BA%BC%EF%BC%9F"><span class="toc-article-text">Shell 是什麼？</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Shebang"><span class="toc-article-text">Shebang</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E5%9F%B7%E8%A1%8C-Shell-Script"><span class="toc-article-text">執行 Shell Script</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#IPC-pipes-stdin-stdout-stderr"><span class="toc-article-text">IPC: pipes, stdin, stdout, stderr</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Shell-Variables"><span class="toc-article-text">Shell Variables</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Special-Shell-Variables"><span class="toc-article-text">Special Shell Variables</span></a></li></ol></li><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#Bash-Concepts"><span class="toc-article-text">Bash Concepts</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E5%88%9D%E5%A7%8B%E7%A8%8B%E5%BA%8F%EF%BC%9ALogin-Shell-Non-Login-Shell"><span class="toc-article-text">初始程序：Login Shell, Non-Login Shell</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E4%BD%BF%E7%94%A8-su-%E5%88%87%E6%8F%9B%E8%BA%AB%E4%BB%BD"><span class="toc-article-text">使用 su 切換身份</span></a></li><li class="toc-article-item toc-article-level-3"><a class="toc-article-link" href="#%E5%A6%82%E4%BD%95%E7%9F%A5%E9%81%93%E7%8F%BE%E5%9C%A8%E6%98%AF%E5%93%AA%E4%B8%80%E7%A8%AE%E6%96%B9%E5%BC%8F%EF%BC%9F"><span class="toc-article-text">如何知道現在是哪一種方式？</span></a></li></ol></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#Bash-Built-in-Commands"><span class="toc-article-text">Bash Built-in Commands</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#IFS"><span class="toc-article-text">IFS</span></a></li></ol></li><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#Q-and-A"><span class="toc-article-text">Q and A</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#sh-vs-bash-%E7%9A%84%E5%B7%AE%E7%95%B0%EF%BC%9F"><span class="toc-article-text">sh vs bash 的差異？</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E9%80%99%E5%B9%B4%E4%BB%A3%E9%82%84%E9%9C%80%E8%A6%81-Shell-Programming%EF%BC%9F"><span class="toc-article-text">這年代還需要 Shell Programming？</span></a></li></ol></li><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#%E5%BB%B6%E4%BC%B8%E9%96%B1%E8%AE%80"><span class="toc-article-text">延伸閱讀</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E7%AB%99%E5%85%A7%E5%BB%B6%E4%BC%B8"><span class="toc-article-text">站內延伸</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E5%8F%83%E8%80%83%E8%B3%87%E6%96%99"><span class="toc-article-text">參考資料</span></a></li></ol></li></ol>
		</div>
	
	</div>

	<hr />

	<!-- categories -->
  
	<div class="meta-widget">
		<a data-toggle="collapse" data-target="#categorys"><i class="fa fa-folder"></i> Categories</a>
    <!--<ul id="categorys" class="tag_box list-unstyled collapse in">-->
      <div>
  <!--<li>-->
    <span class="label label-info"><a href="/categories/Linux/" style="color: white">Linux <span class="badge">9</span></a></span>
  <!--</li>-->
</div>
    <!--</ul>-->
	</div>
	

	<hr />

	<!-- tags -->
	
	<div class="meta-widget">
		<a data-toggle="collapse" data-target="#tags"><i class="fa fa-tags"> Tags</i></a>
    <!--<ul id="tags" class="tag_box list-unstyled collapse in">-->
    <div>
	  	
  <span class="label label-success"><a href="/tags/Linux/" style="color: white">Linux <span class="badge">8</span></a></span> <span class="label label-success"><a href="/tags/bash/" style="color: white">bash <span class="badge">2</span></a></span> <span class="label label-success"><a href="/tags/Shell/" style="color: white">Shell <span class="badge">1</span></a></span> <span class="label label-success"><a href="/tags/IPC/" style="color: white">IPC <span class="badge">1</span></a></span> <span class="label label-success"><a href="/tags/pipe/" style="color: white">pipe <span class="badge">1</span></a></span> <span class="label label-success"><a href="/tags/process/" style="color: white">process <span class="badge">1</span></a></span> <span class="label label-success"><a href="/tags/Operating-Systems/" style="color: white">Operating Systems <span class="badge">1</span></a></span> <span class="label label-success"><a href="/tags/POSIX/" style="color: white">POSIX <span class="badge">1</span></a></span>
	  </div>
    <!--</ul>-->
	</div>
	


  <hr />

	<div class="meta-widget">
		<!-- v4 -->
		<h4>About</h4>
		
			<li><a href="/2035/01/21/Index/">全站索引</a></li>
		
			<li><a href="/2017/12/29/About/About-This-Blog/">關於這裏</a></li>
		
			<li><a href="/2017/12/29/About/About-Author/">關於作者</a></li>
		
			<li><a href="/2017/09/20/About/Learning-Approaches/">學習法則</a></li>
		
			<li><a href="/2017/11/26/Thinking-in-Essence/">思考本質</a></li>
		
			<li><a href="/2017/12/02/About/Epiphany/">一些領悟</a></li>
		
			<li><a href="/2014/10/26/Management/Classified-Philosophy/">分類哲學</a></li>
		

		<h4>著作</h4>
		
			<li><a target="_blank" rel="noopener" href="https://www.tenlong.com.tw/products/9786264142335">共同著作：軟體品質全面思維 (2025)</a></li>
		
			<li><a href="/2023/07/17/About/2023-SRE-Practice-and-IDP/">個人著作：SRE實踐與開發平台指南</a></li>
		
			<li><a href="/2023/05/23/About/2023-Software-Test-Practice/">共同著作：軟體測試實務 (2023)</a></li>
		
			<li><a href="/2019/05/17/About/DDS-zh_TW/">譯著：分散式系統設計 (2019)</a></li>
		

		<h4>演講</h4>
		
			<li><a target="_blank" rel="noopener" href="https://www.youtube.com/playlist?list=PL63J1r2PBvoiKFC40HTdSrGSQVBqOutOf">演講錄影 @ Youtube</a></li>
		
			<li><a href="/2023/09/09/About/2023-AWS-Career-Exploration-Day/">探索職涯、複利人生 - AWS Career Exploration Day 2023</a></li>
		
			<li><a href="/2023/07/17/About/2023-SRE-Practice-and-IDP/">個人著作 SRE 書友見面會</a></li>
		
			<li><a href="/2023/05/23/About/2023-Software-Test-Practice/">軟體測試實務 - 新書發表會</a></li>
		
			<li><a href="/2022/12/21/About/2022-AWS-Career-Exploration-Day/">探索職涯、成就未來 - AWS Career Exploration Day 2022</a></li>
		
			<li><a href="/2022/08/13/SQA/Path-to-Software-Testing/">從理想、到現實的距離，開啟品味軟體測試之路</a></li>
		
			<li><a href="/2022/05/10/About/2022-SREConf2022/">91APP 在 AWS 上的 SRE 實踐之路</a></li>
		
			<li><a target="_blank" rel="noopener" href="https://www.slideshare.net/rickhwang/2020-aws-summit-aws">在矩陣型組織裡，如何有效管理 AWS 的成本結構與系統架構</a></li>
		
			<li><a target="_blank" rel="noopener" href="https://www.slideshare.net/rickhwang/aws-using-aws-for-disaster-recovery/">災難演練 @ AWS 實戰分享</a></li>
		
			<li><a href="/2019/04/27/DevOps/Introduce-to-Continuous-Delivery-2/">導讀持續交付 2.0 - 談當代軟體交付之虛實融合</a></li>
		
			<li><a href="/2019/03/28/DevOps/DevOpsTaiwan-Meetup-Beginning-in-Artifacts-Management/">聊聊軟體交付的濫觴 談產出物管理</a></li>
		
			<li><a href="/2018/09/12/DevOps/DevOpsDaysTaipei2018-Emergency-And-Incident-Management/">從緊急事件 談 SRE 應變能力的培養</a></li>
		
			<li><a href="/2018/07/18/About/20180718-API-Gateway/">邁向 API 經濟 - API Gateway 導入之旅</a></li>
		
			<li><a href="/2018/05/26/About/201805-Monitoring-Tools-CloudWatch/">Monitoring Tools 大亂鬥 - AWS CloudWatch</a></li>
		
			<li><a href="/2018/03/29/About/2018-Serverless-All-Star/">Ops as Code using Serverless</a></li>
		
			<li><a href="/2017/06/21/AWS/Stategies-System-Monitor_and_CloudWatch/">淺談系統監控與 CloudWatch 的應用</a></li>
		

		<!-- v3 -->
		<!--
		<li><a href="/2018/07/08/Index/">部落格索引</a></li>
		<li><a href="/2017/12/29/About/About-This-Blog/">關於這個部落格</a></li>
		<li><a href="/2017/12/29/About/About-Author/">關於作者</a></li>
		<li><a href="/2017/09/20/About/Learning-Approaches/">學習法則</a></li>
		<li><a href="/2014/12/27/Management/經營之道/">經營之道</a></li>
		<li><a href="/2017/12/02/About/Epiphany/">一些領悟</a></li>
		-->

		<!-- v2 -->
		<!-- <a href="/2017/07/01/Management/Developer-or-Engineer/">軟體開發者 (Software Developer)</a>、<a target="_blank" rel="noopener" href="http://rickmidi.blogspot.com/">音樂愛好者</a>，工作角色經歷 DevOps 三個圈圈職務: Dev / <a href="/categories/軟體測試/">QA</a> / <a href="/categories/DevOps/">Ops</a>。這幾年專注在經營管理、<a href="/2016/10/01/AWS-Study-Roadmap/">AWS</a> / GCP、分散式架構、<a href="/categories/DevOps/">維運、DevOps / SRE</a> 等領域，並活躍於各大社群的活動、演講，著有技術部落格：<a href="https://rickhw.github.io/">Complete Think</a>。工作之外也是業餘音樂愛好者，專注在 吉他、鍵盤、編曲、教學，著有音樂部落格：<a target="_blank" rel="noopener" href="https://rickmidi.blogspot.com/">喝咖啡聊音樂</a>。 -->

		<!-- v1 -->
		<!--
		<li>Software Developer</li>
		<li><a href="/categories/軟體測試/">SQA Manager</a></li>
		<li><a href="/categories/DevOps/">Operation Manager</a></li>
		<li><a target="_blank" rel="noopener" href="http://rickmidi.blogspot.com/">Musician and Guitarist</a></li>
		<li>
			<ol>
				<li>Management</li>
				<li>Cloud / Distributed Systems</li>
				<li>DevOps / SRE / </li>
			</ol>
		</li>
		-->

		<!--
		<h4>Donate</h4>
		<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
		<input type="hidden" name="cmd" value="_s-xclick" />
		<input type="hidden" name="hosted_button_id" value="UUMSV7TXWT2AJ" />
		<input type="image" src="https://www.paypalobjects.com/en_US/TW/i/btn/btn_donateCC_LG.gif" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" />
		<img alt="" border="0" src="https://www.paypal.com/en_TW/i/scr/pixel.gif" width="1" height="1" />
		</form>
		-->

		<h4>Facebook</h4>

		<div class="fb-page" data-href="https://www.facebook.com/completethink/" data-tabs="timeline" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true"><blockquote cite="https://www.facebook.com/completethink/" class="fb-xfbml-parse-ignore"><a target="_blank" rel="noopener" href="https://www.facebook.com/completethink/">Complete Think</a></blockquote></div>

		<a target="_blank" rel="noopener" href="https://aws.amazon.com/developer/community/heroes/rick-hwang/"><img
				src="/images/About/AWS-Hero/community-heroes_logo.png"></a>

		<h4>AWS Certifications</h4>
		<a href="/2016/04/22/AWS/AWS-Certified-Solutions-Architect_Associate/"><img src="/images/About/Solutions_Architect-Associate.jpg"></a>
		<a href="/2016/07/29/AWS/AWS-Certified-SysOps-Administrator/"><img src="/images/About/SysOps-Administrator-Associate.png"></a>
		<a href="/2016/08/20/AWS/AWS-Certified-Developer/"><img src="/images/About/Developer-Associate.png"></a>
	</div>

	<hr />
</div><!-- col-md-3 -->

		

	</div><!-- row -->


    </div>
  </div>


<div class="container-narrow">
    <footer> <p>
  &copy; 2015-2022 Rick Hwang
  
      with help from <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme base on <a target="_blank" rel="noopener" href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.
</p> </footer>
</div>

<!-- container-narrow -->

<div id="gotop">

  <!-- 
    <i class="fa fa-sitemap"></i> <a href="/2017/12/29/About/About-This-Blog/" title="About this blog" target="_blank"]);">關於這裡</a><br />
  
    <i class="fa fa-user"></i> <a href="/2017/12/29/About/About-Author/" title="" target="_blank"]);">關於作者</a><br />
  
    <i class="fa fa-book"></i> <a href="/2017/09/20/About/Learning-Approaches/" title="" target="_blank"]);">學習法則</a><br />
  
    <i class="fa fa-coffee"></i> <a href="https://www.gtcafe.com" title="GTCafe Studio" target="_blank"]);">GTCafe Studio</a><br />
  
    <i class="fa fa-music"></i> <a href="https://www.gtcafe.com/rickmidi/" title="喝咖啡 聊音樂 (v2021)" target="_blank"]);">喝咖啡 聊音樂 (v2021)</a><br />
   -->

  <!-- <h4>About</h4> -->

  
    <li><a href="/2035/01/21/Index/">全站索引</a></li>
  
    <li><a href="/2017/12/29/About/About-This-Blog/">關於這裏</a></li>
  
    <li><a href="/2017/12/29/About/About-Author/">關於作者</a></li>
  
    <li><a href="/2017/09/20/About/Learning-Approaches/">學習法則</a></li>
  
    <li><a href="/2017/11/26/Thinking-in-Essence/">思考本質</a></li>
  
    <li><a href="/2017/12/02/About/Epiphany/">一些領悟</a></li>
  
    <li><a href="/2014/10/26/Management/Classified-Philosophy/">分類哲學</a></li>
  

  <a href="#">▲ TOP ▲ </a>
</div>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/gtcafe-tracking.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>

<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);

// GTCafe API: completet
tracking_update();
</script>



</body>
</html>
