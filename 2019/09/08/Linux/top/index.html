<!DOCTYPE HTML>
<head>
  <meta charset="utf-8">
  
  <title>top | Complete Think</title>

  <meta name="author" content="Rick Hwang">
  <meta name="description" content="整理 Linux 效能工具 top 的一些資訊，範例是在 ubuntu 16.04, AWS EC2 c5.large 上的資訊。




top
上半部
下半部
控制指令

上半部12345top - 12:46:35 up 6 days,  2:54,  1 user,  load averag">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <!-- properties -->
  <meta property="og:title" content="top"/>
  <meta property="og:site_name" content="Complete Think"/>
  <meta property="og:type"      content="website" />
  <meta property="og:url" content="https://rickhw.github.io/2019/09/08/Linux/top/"/>
  <meta property="og:image" content="/images/site_main_logo_v2-201902.png"/>

  <!-- links -->
  <link rel="alternative" href="/atom.xml" title="Complete Think" type="application/atom+xml">
  <link href="/favicon.png" rel="icon">

  <link rel="stylesheet" href="/css/bootstrap.min.css" media="screen" type="text/css">
  <!--
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap-theme.min.css">
  -->
  <link rel="stylesheet" href="/css/font-awesome.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/highlight.css" media="screen" type="text/css">
  <link rel="stylesheet" href="/css/google-fonts.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <script src="/js/jquery-2.0.3.min.js"></script>

  <!-- analytics -->
  
<!--
<script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'G-74Y1F3F5W0']);
    _gaq.push(['_trackPageview']);

    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
</script>
-->
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-74Y1F3F5W0"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-74Y1F3F5W0');
</script>



  <!-- Facebook SDK -->
  <!-- ref: https://developers.facebook.com/docs/plugins/like-button -->
  <!-- @rickd 2022/02/24
    <div id="fb-root"></div>
    <script async defer crossorigin="anonymous"
      src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v3.2&appId=1554905741423841&autoLogAppEvents=1"></script>
  -->
  <!-- @ricka 2022/02/24 -->
  <!-- ref: https://developers.facebook.com/docs/plugins/like-button -->
  <!--
  <div id="fb-root"></div>
  <script async defer crossorigin="anonymous"
    src="https://connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v13.0&appId=1554905741423841&autoLogAppEvents=1"
    nonce="bd9r2mJp"></script>
  -->

  <!-- @ricka 2022/09/06 -->
  <!-- ref: https://developers.facebook.com/docs/plugins/like-button -->
  <div id="fb-root"></div>
  <script async defer crossorigin="anonymous"
    src="https://connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v14.0&appId=1554905741423841&autoLogAppEvents=1"
    nonce="opf2Gext"></script>


<meta name="generator" content="Hexo 6.1.0"></head>


<body>

  
<nav id="main-nav" class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
      <button type="button" class="navbar-header navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
		<span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
	  <a class="navbar-brand active" href="/">Complete Think</a>

      <div class="collapse navbar-collapse nav-menu">
		<ul class="nav navbar-nav">
		  	
		  		
					<li class='dropdown'>
						<a aria-expanded='false' class='dropdown-toggle' data-toggle='dropdown' href='#' role='button'><i class="fa fa-folder"></i>Categories <span class='caret'/></span></a>
		            	<ul class='dropdown-menu' role='menu'>
		            	
						<li><a href="/categories/AWS/">AWS <sup>82</sup></a></li>
						
						<li><a href="/categories/About/">About <sup>29</sup></a></li>
						
						<li><a href="/categories/Blog/">Blog <sup>5</sup></a></li>
						
						<li><a href="/categories/經營管理/Career/">Career <sup>6</sup></a></li>
						
						<li><a href="/categories/Coding/">Coding <sup>10</sup></a></li>
						
						<li><a href="/categories/Computer-Science/">Computer Science <sup>6</sup></a></li>
						
						<li><a href="/categories/Container/">Container <sup>9</sup></a></li>
						
						<li><a href="/categories/Data/">Data <sup>2</sup></a></li>
						
						<li><a href="/categories/DevOps/">DevOps <sup>43</sup></a></li>
						
						<li><a href="/categories/Distributed-Systems/">Distributed Systems <sup>20</sup></a></li>
						
						<li><a href="/categories/GCP/">GCP <sup>8</sup></a></li>
						
						<li><a href="/categories/Linux/">Linux <sup>9</sup></a></li>
						
						<li><a href="/categories/Misc/">Misc <sup>3</sup></a></li>
						
						<li><a href="/categories/OS-X/">OS X <sup>4</sup></a></li>
						
						<li><a href="/categories/Redmine/">Redmine <sup>6</sup></a></li>
						
						<li><a href="/categories/Reference/">Reference <sup>5</sup></a></li>
						
						<li><a href="/categories/DevOps/SRE/">SRE <sup>25</sup></a></li>
						
						<li><a href="/categories/Software-Engineering/">Software Engineering <sup>10</sup></a></li>
						
						<li><a href="/categories/System-Design/">System Design <sup>3</sup></a></li>
						
						<li><a href="/categories/經營管理/人才管理/">人才管理 <sup>10</sup></a></li>
						
						<li><a href="/categories/經營管理/溝通/">溝通 <sup>9</sup></a></li>
						
						<li><a href="/categories/經營管理/知識管理/">知識管理 <sup>4</sup></a></li>
						
						<li><a href="/categories/經營管理/">經營管理 <sup>61</sup></a></li>
						
						<li><a href="/categories/軟體測試/">軟體測試 <sup>14</sup></a></li>
						
						</ul>
					</li>
		  		
		  	
		  		
		  			<li><a href="/2016/10/01/AWS-Study-Roadmap/" title="AWS Study Notes."><i class="fa fa-cloud"></i>AWS</a></li>
		  		
		  	
		  		
		  			<li><a href="/categories/DevOps/" title="DevOps / SRE"><i class="fa fa-crosshairs"></i>DevOps</a></li>
		  		
		  	
		  		
		  			<li><a href="/2017/07/01/Index-Software-Engineering-In-Practice/" title="設計、開發、測試、維運"><i class="fa fa-cogs"></i>軟體工程</a></li>
		  		
		  	
		  		
		  			<li><a href="/2017/07/01/Index-Management/" title="經營、管理、領導、教練、產品"><i class="fa fa-users"></i>經營管理</a></li>
		  		
		  	
		  		
		  			<li><a href="/categories/Reference/" title="參考書、名詞對照表"><i class="fa fa-folder"></i>字典工具</a></li>
		  		
		  	
			</ul>

			<!-- @ricka: menu in right -->
			<ul class='nav navbar-nav navbar-right'>
				<li class='dropdown'>
					<a aria-expanded='false' class='dropdown-toggle' data-toggle='dropdown' href='#' role='button'><i class="fa fa-folder"></i>About<span class='caret'/></span></a>
					<ul class='dropdown-menu' role='menu'>
					
						<li><a href="/2017/12/29/About/About-This-Blog/" title="About this blog" target="_blank"> <i class="fa fa-sitemap"></i>關於這裡</a></li>
					
						<li><a href="/2017/12/29/About/About-Author/" title="" target="_blank"> <i class="fa fa-user"></i>關於作者</a></li>
					
						<li><a href="/2017/09/20/About/Learning-Approaches/" title="" target="_blank"> <i class="fa fa-book"></i>學習法則</a></li>
					
						<li><a href="https://www.gtcafe.com" title="GTCafe Studio" target="_blank"> <i class="fa fa-coffee"></i>GTCafe Studio</a></li>
					
						<li><a href="https://www.gtcafe.com/rickmidi/" title="喝咖啡 聊音樂 (v2021)" target="_blank"> <i class="fa fa-music"></i>喝咖啡 聊音樂 (v2021)</a></li>
					
					</ul>
				</li>
			</ul>
			<!-- @ricka end -->
      </div>
    </div> <!-- container -->
</nav>
<div class="clearfix"></div>

  <div class="container">
    <div class="content" style="background-color: white;">
       




	
		<!-- @rick, header of article -->
		<!-- original
		<div class="page-header">
			<h1> top</h1>
		</div>
		-->

		<div class="panel article_title">
			<div class="panel-heading">
    		<h1> top</h1>
  		</div>
		</div>

	



<div class="row post">
	<!-- cols -->
	
	<div class="col-md-9">
		

			

			<!-- content -->
			<div class="mypage">
				<!-- ref: https://developers.facebook.com/docs/plugins/like-button -->
				<!-- Facebook in front of page -->
				<!--
				<iframe
					src="https://www.facebook.com/plugins/like.php?href=https%3A%2F%2Frickhw.github.io%2F2019%2F09%2F08%2FLinux%2Ftop%2F&width=450&layout=standard&action=like&size=small&show_faces=true&share=true&height=80&appId=1554905741423841"
					width="450" height="80"
					style="border:none;overflow:hidden"
					scrolling="no" frameborder="0"
					allowTransparency="true" allow="encrypted-media"></iframe>
				-->

				<!-- <div class="fb-like" data-href="https://rickhw.github.io/2019/09/08/Linux/top/" data-layout="standard"
					data-action="like" data-size="small" data-show-faces="true" data-share="true"></div>-->

				<div class="fb-like" data-href="https://rickhw.github.io/2019/09/08/Linux/top/" data-width="" data-layout="button_count"
					data-action="like" data-size="small" data-share="true"></div>

				<hr />

				<p>整理 Linux 效能工具 <code>top</code> 的一些資訊，範例是在 <code>ubuntu 16.04, AWS EC2 c5.large</code> 上的資訊。</p>
<span id="more"></span>


<hr>
<h1 id="top"><a href="#top" class="headerlink" title="top"></a>top</h1><ul>
<li>上半部</li>
<li>下半部</li>
<li>控制指令</li>
</ul>
<h2 id="上半部"><a href="#上半部" class="headerlink" title="上半部"></a>上半部</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">top - 12:46:35 up 6 days,  2:54,  1 user,  load average: 0.03, 0.01, 0.00</span><br><span class="line">Tasks: 112 total,   1 running,  69 sleeping,   0 stopped,   0 zombie</span><br><span class="line">%Cpu(s):  0.2 us,  0.0 sy,  0.0 ni, 99.8 <span class="built_in">id</span>,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st</span><br><span class="line">KiB Mem :  3794276 total,   375408 free,  1904048 used,  1514820 buff/cache</span><br><span class="line">KiB Swap:        0 total,        0 free,        0 used.  1600528 avail Mem</span><br></pre></td></tr></table></figure>


<p>第一行資訊：</p>
<ol>
<li><code>12:45:14</code>: 系統目前的時間</li>
<li><code>up 6 days,  2:52</code>: 已經開機多久</li>
<li><code>user</code>: 目前系統有多少使用者登入</li>
<li><code>load average</code>: 系統負載狀況，分成每分鐘、每五分鐘、每十五分鐘</li>
</ol>
<p>第二行：描述 Task 的狀態</p>
<ol>
<li><code>112</code> 個 Task</li>
<li><code>1</code> 個在 running</li>
<li><code>69</code> 個在 sleeping</li>
<li><code>0</code> 個 stopped</li>
<li><code>0</code> 個 zombie</li>
</ol>
<p>第三行：描述 CPU 使用狀況</p>
<ul>
<li><code>0.2 us</code>: user CPU time, User Space CPU 使用佔比</li>
<li><code>0.0 sy</code>: system CPU time, Kernel Space CPU 使用佔比</li>
<li><code>0.0 ni</code>: nice CPU time</li>
<li><code>99.8 id</code>: idle</li>
<li><code>0.0 wa</code>: iowait</li>
<li><code>0.0 hi</code>: Hardware IRQ, 硬體中斷 CPU 使用佔比</li>
<li><code>0.0 si</code>: Software Interrupts CPU 使用佔比</li>
<li><code>0.0 st</code>: steal time</li>
</ul>
<blockquote>
<p>Nice: Unix&#x2F;Linux 裡程序 (Process) 的靜態優先級，範圍從 <code>-20 ~ +19</code>，<code>-20</code> 最高優先，<code>+19</code> 最後，預設是 0。Nice 意思是『友好』，越高表示給予越多時間。更多參閱 Wikipedia: <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Nice_(Unix)">Nice</a></p>
</blockquote>
<blockquote>
<p>檢查 CPU 工具：</p>
<ol>
<li><code>apt-get install sysstat</code></li>
<li><code>mpstat</code></li>
<li><code>mpstat -P ALL</code></li>
</ol>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">~$ mpstat -P ALL</span><br><span class="line">Linux 4.15.0-1045-aws (ip-10-2-9-114) 	09/09/19 	_x86_64_	(2 CPU)</span><br><span class="line"></span><br><span class="line">13:41:11     CPU    %usr   %<span class="built_in">nice</span>    %sys %iowait    %irq   %soft  %steal  %guest  %gnice   %idle</span><br><span class="line">13:41:11     all    0.26    0.00    0.09    0.06    0.00    0.04    0.00    0.00    0.00   99.54</span><br><span class="line">13:41:11       0    0.26    0.00    0.09    0.10    0.00    0.04    0.00    0.00    0.00   99.51</span><br><span class="line">13:41:11       1    0.26    0.00    0.09    0.03    0.00    0.04    0.00    0.00    0.00   99.58</span><br></pre></td></tr></table></figure>

<p>第四行：描述記憶體狀況</p>
<ul>
<li>KiB Mem: 單位是 <code>KiB</code></li>
<li><code>3794276</code> total: 實體記憶體大小</li>
<li><code>375408</code> free: 剩餘的記憶體大小</li>
<li><code>1904048</code> used: 使用記憶體大小</li>
<li><code>1514820</code> buff&#x2F;cache: 緩衝、快取區大小</li>
</ul>
<p>第五行：描述 SWAP (暫存記憶體) 狀況</p>
<ul>
<li>KiB Swap:</li>
<li><code>0</code> total: SWAP 總量</li>
<li><code>0</code> free: SWAP 剩下的量</li>
<li><code>0</code> used: SWAP 使用的量</li>
<li><code>1600528</code> avail Mem: 可用的記憶體大小</li>
</ul>
<h2 id="下半部"><a href="#下半部" class="headerlink" title="下半部"></a>下半部</h2><p>下半部顯示的是 process 的狀態</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"> PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND</span><br><span class="line">4076 200       20   0 4168712 1.638g  25108 S   0.3 45.3  58:04.16 java</span><br><span class="line">   1 root      20   0  225240   9192   6908 S   0.0  0.2   0:05.62 systemd</span><br><span class="line">   2 root      20   0       0      0      0 S   0.0  0.0   0:00.01 kthreadd</span><br><span class="line">   4 root       0 -20       0      0      0 I   0.0  0.0   0:00.00 kworker/0:0H</span><br><span class="line">   6 root       0 -20       0      0      0 I   0.0  0.0   0:00.00 mm_percpu_wq</span><br><span class="line">   7 root      20   0       0      0      0 S   0.0  0.0   0:05.56 ksoftirqd/0</span><br><span class="line">   8 root      20   0       0      0      0 I   0.0  0.0   0:10.57 rcu_sched</span><br><span class="line">   9 root      20   0       0      0      0 I   0.0  0.0   0:00.00 rcu_bh</span><br><span class="line">  10 root      rt   0       0      0      0 S   0.0  0.0   0:00.01 migration/0</span><br><span class="line">  11 root      rt   0       0      0      0 S   0.0  0.0   0:00.44 watchdog/0</span><br><span class="line">  12 root      20   0       0      0      0 S   0.0  0.0   0:00.00 cpuhp/0</span><br><span class="line">  13 root      20   0       0      0      0 S   0.0  0.0   0:00.00 cpuhp/1</span><br></pre></td></tr></table></figure>

<p>欄位的說明：</p>
<ul>
<li><code>PID</code>: ProcessID</li>
<li><code>USER</code>: 使用者</li>
<li><code>PR</code>: Process 優先序</li>
<li><code>NI</code>: Nice 值，越小優先序越高</li>
<li><code>VIRT</code>: virtual memory usage 虛擬記憶體使用，單位 KiB<ul>
<li>應用程式需要的虛擬記憶體大小，不是真實的使用記憶體。</li>
<li>man: The total amount of virtual memory used by the task.  It includes all code, data and shared libraries plus pages that  have  been  swapped  out  and  pages that have been mapped but not used.</li>
<li><code>VIRT = SWAP + RES</code></li>
</ul>
</li>
<li><code>RES</code>: resident memory usage，該程序使用的、未被使用的記憶體大小。<ul>
<li>man: A subset of the virtual address space (VIRT) representing the non-swapped physical memory a task is currently using. It is also the sum of the RSan, RSfd and RSsh fields. It  can  include private anonymous pages, private pages mapped to files (including program images and shared libraries) plus shared anonymous pages. All such memory is backed by the swap file represented separately under SWAP</li>
<li><code>RES = CODE + DATA</code></li>
</ul>
</li>
<li><code>SHR</code>: Share Memory 共享記憶體大小</li>
<li><code>S</code>: 程序狀態<ul>
<li>D: 不可中斷的睡眠狀態</li>
<li>R: 執行中</li>
<li>S: 睡眠中</li>
<li>T: 跟蹤&#x2F;停止</li>
<li>Z: Zombie 程序</li>
</ul>
</li>
<li><code>%CPU</code>: 上次更新到現在的 CPU 佔比</li>
<li><code>%MEM</code>: 程序使用的記憶體百分比</li>
<li><code>TIME+</code>: 程序使用的 CPU 時間總計，單位為 1&#x2F;100 s</li>
<li><code>COMMAND</code>: 程序名稱</li>
</ul>
<h2 id="控制指令"><a href="#控制指令" class="headerlink" title="控制指令"></a>控制指令</h2><p>底下是在 top 畫面時，可以使用的參數。</p>
<ul>
<li>Global<ul>
<li><code>s</code>, <code>d</code>: 調整更新頻率</li>
<li><code>A</code>: 同時顯示 動態、PID、Mem、CPU</li>
<li><code>H</code>: Thread Mode, Default: off</li>
<li><code>1</code>: 一個或多個 CPU 顯示切換</li>
<li><code>z</code>: 顏色</li>
<li><code>Z</code>: 設定顏色</li>
<li><code>u</code>: 指定要觀察的 使用者</li>
<li><code>h</code>, <code>?</code>: help</li>
<li><code>q</code>: 離開 top</li>
</ul>
</li>
<li>cli 參數: 輸出報表使用<ul>
<li><code>b</code>: batch</li>
</ul>
</li>
<li>控制上半部<ul>
<li><code>l</code>: 開或關上半部的第一行訊息</li>
<li><code>t</code>: 依據切換以下訊息：<ul>
<li>開或關閉上半部的 Task 資訊</li>
<li>切換第三行 CPU 的顯示方式，像是 Progress Bar</li>
</ul>
</li>
<li><code>m</code>: 關閉或者開啟第四行 Mem 和 第五行 Swap 的資訊</li>
<li><code>E</code>: 切換單位</li>
</ul>
</li>
<li>控制下半部<ul>
<li><code>f</code>: 控制顯示的欄位</li>
<li><code>N</code>: 用 PID 數字，由大到小排序</li>
<li><code>P</code>: 用 CPU 使用率，由大到小排序</li>
<li><code>M</code>: 以記憶體大小，由大到小排序</li>
<li><code>n</code>: 設定顯示 Process 的數量</li>
<li><code>R</code>: 排序</li>
<li><code>T</code>: 用時間累積排序</li>
<li><code>上下</code>: 捲動畫面</li>
</ul>
</li>
</ul>
<h2 id="常用情境"><a href="#常用情境" class="headerlink" title="常用情境"></a>常用情境</h2><ul>
<li>找出前十個最消耗記憶體的程序</li>
</ul>
<blockquote>
<p><code>top -b -o +%MEM | head -n 17</code></p>
</blockquote>
<ul>
<li>找出前十個最消耗 CPU 的程序</li>
</ul>
<blockquote>
<p><code>top -b -o +%CPU | head -n 17</code></p>
</blockquote>
<ul>
<li>觀察 <code>PID=1234</code>，每 1 秒更新一次</li>
</ul>
<blockquote>
<p><code>top -b -d 1 -p 1234</code></p>
</blockquote>
<ul>
<li>觀察使用 ubuntu，每 2 秒更新一次</li>
</ul>
<blockquote>
<p><code>top -d 2 -u ubuntu</code></p>
</blockquote>
<hr>
<h1 id="htop"><a href="#htop" class="headerlink" title="htop"></a>htop</h1><p>top 在大部分的 linux 都會有，而另一個類似，但功能更強大的則是 <code>htop</code>，特別是使用者體驗的提升，像是顏色、支援滑鼠操作。比較新版的 Linux，像是 Ubuntu 18.04 預設已經安裝。</p>
<h2 id="功能設定"><a href="#功能設定" class="headerlink" title="功能設定"></a>功能設定</h2><p>透過 F2 可以設定功能設定。</p>
<p>htop 上方的 Meters (儀表) 可以設定以下：</p>
<ol>
<li>欄位配置：欄位 (CPU, Memory) 可以移動、增加、刪除</li>
<li>顯示方式：顯示方式有 Graph、Text、Bar、LED，如下截圖：<br><img src="/images/Linux/htop/custom-meters-graph.png"><br><img src="/images/Linux/htop/custom-meters-led.png"><br><img src="/images/Linux/htop/custom-meters-text.png"></li>
</ol>
<p>下圖是我重新配置的範例，增加了 Hostname、Time，調整了 CPU &#x2F; Memory &#x2F; Swap 位置：</p>
<p><img src="/images/Linux/htop/custom-meters.png"></p>
<h2 id="常用功能"><a href="#常用功能" class="headerlink" title="常用功能"></a>常用功能</h2><ul>
<li><code>F4</code>: 用關鍵字過濾，例如找 <code>java</code> process<ul>
<li><code>/</code> 搜尋 關鍵字</li>
</ul>
</li>
<li><code>F5</code>: 顯示 process tree</li>
<li><code>F6</code>: 排序，也可以直接用滑鼠點選綠色的欄位。</li>
<li><code>l</code>: list open file, 在 process 位置，顯示該 process 相關的資源，例如 binary、log …<ul>
<li>等同於 <code>lsof -p $(pidof -s &lt;name&gt;)</code></li>
</ul>
</li>
<li><code>p</code>: 顯示程式路徑</li>
<li><code>u</code>: 篩選個別使用者程序 (process)，例如篩選使用者 <code>www-data</code> 的程序</li>
<li><code>U</code>: show &#x2F; hide user thread，也可以到 F2 -&gt; Display Options 設定</li>
<li><code>K</code>: show &#x2F; hide kernal thread，也可以到 F2 -&gt; Display Options 設定</li>
<li><code>s</code>: 使用工具 <code>strace</code> 找 system call</li>
</ul>
<h2 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h2><ul>
<li>config: htop 的設定會存在：<code>$HOME/.config/htop/htoprc</code>，如果弄爛了，把這設定砍掉重來就好。</li>
<li>VIRT 的顏色：<ul>
<li>紅色：單位為 GB</li>
<li>藍色：單位為 MB</li>
</ul>
</li>
</ul>
<hr>
<h1 id="其他-1"><a href="#其他-1" class="headerlink" title="其他"></a>其他</h1><h2 id="相關工具"><a href="#相關工具" class="headerlink" title="相關工具"></a>相關工具</h2><ul>
<li>Process: ps, pstree</li>
<li>I&#x2F;O: lsof, lsblk</li>
<li>CPU: lscpu, iostat, sar, mpstat</li>
<li>lsmem</li>
<li>lshw</li>
<li>atop</li>
<li>vmstat</li>
</ul>
<h2 id="類似工具"><a href="#類似工具" class="headerlink" title="類似工具"></a>類似工具</h2><p>底下是同樣功能，用不同語言實作的。</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://hisham.hm/htop/">htop</a><br><img src="/images/Linux/top/htop_20190930.gif"></li>
<li><a href="hhttp://parall.ax/vtop">vtop</a>: wirtten in Node.js<br><img src="/images/Linux/top/vtop_20190930.gif"></li>
<li><a target="_blank" rel="noopener" href="https://github.com/aksakalli/gtop">gtop</a>: wirtten in Node.js<br><img src="/images/Linux/top/gtop_20190930.gif"></li>
<li><a target="_blank" rel="noopener" href="https://github.com/cjbassi/gotop">gotop</a>: written in Go!<ul>
<li>brew install gotop</li>
<li>snap install gotop-cjbassi</li>
</ul>
</li>
<li><a target="_blank" rel="noopener" href="https://github.com/darxtrix/ptop">ptop</a>: written in python</li>
<li><a target="_blank" rel="noopener" href="https://github.com/p-e-w/hegemon">hegemon</a>: written in Rust</li>
<li><a target="_blank" rel="noopener" href="https://nicolargo.github.io/glances/">glances</a>: support web, export to grafana.</li>
<li><a target="_blank" rel="noopener" href="https://github.com/aristocratos/bashtop">bashtop</a><br><img src="/images/Linux/bashtop.png"></li>
</ul>
<hr>
<h1 id="延伸閱讀"><a href="#延伸閱讀" class="headerlink" title="延伸閱讀"></a>延伸閱讀</h1><h2 id="站內資料"><a href="#站內資料" class="headerlink" title="站內資料"></a>站內資料</h2><ul>
<li><a href="/2018/02/24/Linux/File-Descriptor_and_Open-Files/">File Descriptor and Open File</a></li>
<li><a href="/2014/11/18/Linux/cURL/">cURL</a></li>
</ul>
<h2 id="參考資料"><a href="#參考資料" class="headerlink" title="參考資料"></a>參考資料</h2><ul>
<li><a target="_blank" rel="noopener" href="https://www.simplified.guide/linux/view-process-tree">https://www.simplified.guide/linux/view-process-tree</a></li>
<li><a target="_blank" rel="noopener" href="https://blogs.oracle.com/pranav/how-to-find-out-cpu-utilization-in-linux">https://blogs.oracle.com/pranav/how-to-find-out-cpu-utilization-in-linux</a></li>
<li><a target="_blank" rel="noopener" href="https://david50.pixnet.net/blog/post/45252072-%5B%E7%AD%86%E8%A8%98%5Dlinux---top%E8%B3%87%E8%A8%8A">https://david50.pixnet.net/blog/post/45252072-%5B筆記%5Dlinux---top資訊</a></li>
<li><a target="_blank" rel="noopener" href="https://blog.gtwang.org/linux/ps-top-find-processes-by-cpu-memory-usage/">https://blog.gtwang.org/linux/ps-top-find-processes-by-cpu-memory-usage/</a></li>
<li><a target="_blank" rel="noopener" href="https://bqstack.com/b/detail/91/htop:-An-Interactive-Process-Viewer">https://bqstack.com/b/detail/91/htop:-An-Interactive-Process-Viewer</a></li>
</ul>


				<hr />

				<!-- Facebook in bend of page -->
				<div class="fb-like" data-href="https://rickhw.github.io/2019/09/08/Linux/top/" data-width="" data-layout="button_count"
					data-action="like" data-size="small" data-share="true"></div>

				<hr />

				<!-- LikeCoin -->
				<!-- @rickd 2022/09/06 -->
				<!--
				<iframe data-v-b66e9a5a=""
					src="https://button.like.co/in/embed/rick_kyhwang/button?referrer=https://rickhw.github.io/2019/09/08/Linux/top/"
					frameborder="0" class="lc-margin-top-64 lc-margin-bottom-32 lc-mobile">
				</iframe>
				<br />
				-->

				<div>
					<center>
						
<div class="pagination">
<ul class="pagination">
	 
				
    	<li class="prev"><a href="/2019/09/09/AWS/Whitepaper-Using-AWS-For-Disaster-Recovery/" class="alignleft prev"><i class="fa fa-arrow-circle-o-left"></i>Prev</a></li>
  		

        <li><a href="/categories"><i class="fa fa-archive"></i>Archive</a></li>

		
		   <li class="next"><a href="/2019/08/25/Management/Problems-of-Meeting/" class="alignright next">Next<i class="fa fa-arrow-circle-o-right"></i></a></li>         
        
	
</ul>
</div>

					</center>
				</div>


				<!-- comment -->
				
<section id="comment">
  <h2 class="title">Comments</h2>

	<!-- @rick add for facebook -->
	<!-- <div class='fb-comments' data-num-posts='10' data-width='100%' expr:href='data:post.url'/> -->
  <!-- @ricka 2022/09/06, ref: https://developers.facebook.com/docs/plugins/comments/ -->
  <div class="fb-comments" data-order-by="reverse-time" data-href="https://rickhw.github.io/2019/09/08/Linux/top/" data-width="100%" data-numposts="10"></div>

  


</section>






			</div>



		</div> <!-- col-md-9/col-md-12 -->

		
		<!-- meta in right -->
		<div class="col-md-3">

	<!-- date -->
	
	<div class="meta-widget">
		<i class="fa fa-clock-o"></i>
		2019/09/08 18:45:00
	</div>
	

	<hr />

	<!-- toc -->
	<div class="meta-widget">
	
	   <a data-toggle="collapse" data-target="#toc"><i class="fa fa-bars"></i> Table of Content</a>
	   <div id="toc" class="toc collapse in">
				<ol class="toc-article"><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#top"><span class="toc-article-text">top</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E4%B8%8A%E5%8D%8A%E9%83%A8"><span class="toc-article-text">上半部</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E4%B8%8B%E5%8D%8A%E9%83%A8"><span class="toc-article-text">下半部</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E6%8E%A7%E5%88%B6%E6%8C%87%E4%BB%A4"><span class="toc-article-text">控制指令</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E5%B8%B8%E7%94%A8%E6%83%85%E5%A2%83"><span class="toc-article-text">常用情境</span></a></li></ol></li><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#htop"><span class="toc-article-text">htop</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E5%8A%9F%E8%83%BD%E8%A8%AD%E5%AE%9A"><span class="toc-article-text">功能設定</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E5%B8%B8%E7%94%A8%E5%8A%9F%E8%83%BD"><span class="toc-article-text">常用功能</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E5%85%B6%E4%BB%96"><span class="toc-article-text">其他</span></a></li></ol></li><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#%E5%85%B6%E4%BB%96-1"><span class="toc-article-text">其他</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E7%9B%B8%E9%97%9C%E5%B7%A5%E5%85%B7"><span class="toc-article-text">相關工具</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E9%A1%9E%E4%BC%BC%E5%B7%A5%E5%85%B7"><span class="toc-article-text">類似工具</span></a></li></ol></li><li class="toc-article-item toc-article-level-1"><a class="toc-article-link" href="#%E5%BB%B6%E4%BC%B8%E9%96%B1%E8%AE%80"><span class="toc-article-text">延伸閱讀</span></a><ol class="toc-article-child"><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E7%AB%99%E5%85%A7%E8%B3%87%E6%96%99"><span class="toc-article-text">站內資料</span></a></li><li class="toc-article-item toc-article-level-2"><a class="toc-article-link" href="#%E5%8F%83%E8%80%83%E8%B3%87%E6%96%99"><span class="toc-article-text">參考資料</span></a></li></ol></li></ol>
		</div>
	
	</div>

	<hr />

	<!-- categories -->
  
	<div class="meta-widget">
		<a data-toggle="collapse" data-target="#categorys"><i class="fa fa-folder"></i> Categories</a>
    <!--<ul id="categorys" class="tag_box list-unstyled collapse in">-->
      <div>
  <!--<li>-->
    <span class="label label-info"><a href="/categories/Linux/" style="color: white">Linux <span class="badge">9</span></a></span>
  <!--</li>-->
</div>
    <!--</ul>-->
	</div>
	

	<hr />

	<!-- tags -->
	
	<div class="meta-widget">
		<a data-toggle="collapse" data-target="#tags"><i class="fa fa-tags"> Tags</i></a>
    <!--<ul id="tags" class="tag_box list-unstyled collapse in">-->
    <div>
	  	
  <span class="label label-success"><a href="/tags/top/" style="color: white">top <span class="badge">1</span></a></span> <span class="label label-success"><a href="/tags/ps/" style="color: white">ps <span class="badge">1</span></a></span> <span class="label label-success"><a href="/tags/lsof/" style="color: white">lsof <span class="badge">1</span></a></span> <span class="label label-success"><a href="/tags/iostat/" style="color: white">iostat <span class="badge">1</span></a></span>
	  </div>
    <!--</ul>-->
	</div>
	


  <hr />

	<div class="meta-widget">
		<!-- v4 -->
		<h4>About</h4>
		
			<li><a href="/2035/01/21/Index/">全站索引</a></li>
		
			<li><a href="/2017/12/29/About/About-This-Blog/">關於這裏</a></li>
		
			<li><a href="/2017/12/29/About/About-Author/">關於作者</a></li>
		
			<li><a href="/2017/09/20/About/Learning-Approaches/">學習法則</a></li>
		
			<li><a href="/2017/11/26/Thinking-in-Essence/">思考本質</a></li>
		
			<li><a href="/2017/12/02/About/Epiphany/">一些領悟</a></li>
		
			<li><a href="/2014/10/26/Management/Classified-Philosophy/">分類哲學</a></li>
		

		<h4>著作</h4>
		
			<li><a target="_blank" rel="noopener" href="https://www.tenlong.com.tw/products/9786264142335">共同著作：軟體品質全面思維 (2025)</a></li>
		
			<li><a href="/2023/07/17/About/2023-SRE-Practice-and-IDP/">個人著作：SRE實踐與開發平台指南</a></li>
		
			<li><a href="/2023/05/23/About/2023-Software-Test-Practice/">共同著作：軟體測試實務 (2023)</a></li>
		
			<li><a href="/2019/05/17/About/DDS-zh_TW/">譯著：分散式系統設計 (2019)</a></li>
		

		<h4>演講</h4>
		
			<li><a target="_blank" rel="noopener" href="https://www.youtube.com/playlist?list=PL63J1r2PBvoiKFC40HTdSrGSQVBqOutOf">演講錄影 @ Youtube</a></li>
		
			<li><a href="/2023/09/09/About/2023-AWS-Career-Exploration-Day/">探索職涯、複利人生 - AWS Career Exploration Day 2023</a></li>
		
			<li><a href="/2023/07/17/About/2023-SRE-Practice-and-IDP/">個人著作 SRE 書友見面會</a></li>
		
			<li><a href="/2023/05/23/About/2023-Software-Test-Practice/">軟體測試實務 - 新書發表會</a></li>
		
			<li><a href="/2022/12/21/About/2022-AWS-Career-Exploration-Day/">探索職涯、成就未來 - AWS Career Exploration Day 2022</a></li>
		
			<li><a href="/2022/08/13/SQA/Path-to-Software-Testing/">從理想、到現實的距離，開啟品味軟體測試之路</a></li>
		
			<li><a href="/2022/05/10/About/2022-SREConf2022/">91APP 在 AWS 上的 SRE 實踐之路</a></li>
		
			<li><a target="_blank" rel="noopener" href="https://www.slideshare.net/rickhwang/2020-aws-summit-aws">在矩陣型組織裡，如何有效管理 AWS 的成本結構與系統架構</a></li>
		
			<li><a target="_blank" rel="noopener" href="https://www.slideshare.net/rickhwang/aws-using-aws-for-disaster-recovery/">災難演練 @ AWS 實戰分享</a></li>
		
			<li><a href="/2019/04/27/DevOps/Introduce-to-Continuous-Delivery-2/">導讀持續交付 2.0 - 談當代軟體交付之虛實融合</a></li>
		
			<li><a href="/2019/03/28/DevOps/DevOpsTaiwan-Meetup-Beginning-in-Artifacts-Management/">聊聊軟體交付的濫觴 談產出物管理</a></li>
		
			<li><a href="/2018/09/12/DevOps/DevOpsDaysTaipei2018-Emergency-And-Incident-Management/">從緊急事件 談 SRE 應變能力的培養</a></li>
		
			<li><a href="/2018/07/18/About/20180718-API-Gateway/">邁向 API 經濟 - API Gateway 導入之旅</a></li>
		
			<li><a href="/2018/05/26/About/201805-Monitoring-Tools-CloudWatch/">Monitoring Tools 大亂鬥 - AWS CloudWatch</a></li>
		
			<li><a href="/2018/03/29/About/2018-Serverless-All-Star/">Ops as Code using Serverless</a></li>
		
			<li><a href="/2017/06/21/AWS/Stategies-System-Monitor_and_CloudWatch/">淺談系統監控與 CloudWatch 的應用</a></li>
		

		<!-- v3 -->
		<!--
		<li><a href="/2018/07/08/Index/">部落格索引</a></li>
		<li><a href="/2017/12/29/About/About-This-Blog/">關於這個部落格</a></li>
		<li><a href="/2017/12/29/About/About-Author/">關於作者</a></li>
		<li><a href="/2017/09/20/About/Learning-Approaches/">學習法則</a></li>
		<li><a href="/2014/12/27/Management/經營之道/">經營之道</a></li>
		<li><a href="/2017/12/02/About/Epiphany/">一些領悟</a></li>
		-->

		<!-- v2 -->
		<!-- <a href="/2017/07/01/Management/Developer-or-Engineer/">軟體開發者 (Software Developer)</a>、<a target="_blank" rel="noopener" href="http://rickmidi.blogspot.com/">音樂愛好者</a>，工作角色經歷 DevOps 三個圈圈職務: Dev / <a href="/categories/軟體測試/">QA</a> / <a href="/categories/DevOps/">Ops</a>。這幾年專注在經營管理、<a href="/2016/10/01/AWS-Study-Roadmap/">AWS</a> / GCP、分散式架構、<a href="/categories/DevOps/">維運、DevOps / SRE</a> 等領域，並活躍於各大社群的活動、演講，著有技術部落格：<a href="https://rickhw.github.io/">Complete Think</a>。工作之外也是業餘音樂愛好者，專注在 吉他、鍵盤、編曲、教學，著有音樂部落格：<a target="_blank" rel="noopener" href="https://rickmidi.blogspot.com/">喝咖啡聊音樂</a>。 -->

		<!-- v1 -->
		<!--
		<li>Software Developer</li>
		<li><a href="/categories/軟體測試/">SQA Manager</a></li>
		<li><a href="/categories/DevOps/">Operation Manager</a></li>
		<li><a target="_blank" rel="noopener" href="http://rickmidi.blogspot.com/">Musician and Guitarist</a></li>
		<li>
			<ol>
				<li>Management</li>
				<li>Cloud / Distributed Systems</li>
				<li>DevOps / SRE / </li>
			</ol>
		</li>
		-->

		<!--
		<h4>Donate</h4>
		<form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top">
		<input type="hidden" name="cmd" value="_s-xclick" />
		<input type="hidden" name="hosted_button_id" value="UUMSV7TXWT2AJ" />
		<input type="image" src="https://www.paypalobjects.com/en_US/TW/i/btn/btn_donateCC_LG.gif" border="0" name="submit" title="PayPal - The safer, easier way to pay online!" alt="Donate with PayPal button" />
		<img alt="" border="0" src="https://www.paypal.com/en_TW/i/scr/pixel.gif" width="1" height="1" />
		</form>
		-->

		<h4>Facebook</h4>

		<div class="fb-page" data-href="https://www.facebook.com/completethink/" data-tabs="timeline" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="true"><blockquote cite="https://www.facebook.com/completethink/" class="fb-xfbml-parse-ignore"><a target="_blank" rel="noopener" href="https://www.facebook.com/completethink/">Complete Think</a></blockquote></div>

		<a target="_blank" rel="noopener" href="https://aws.amazon.com/developer/community/heroes/rick-hwang/"><img
				src="/images/About/AWS-Hero/community-heroes_logo.png"></a>

		<h4>AWS Certifications</h4>
		<a href="/2016/04/22/AWS/AWS-Certified-Solutions-Architect_Associate/"><img src="/images/About/Solutions_Architect-Associate.jpg"></a>
		<a href="/2016/07/29/AWS/AWS-Certified-SysOps-Administrator/"><img src="/images/About/SysOps-Administrator-Associate.png"></a>
		<a href="/2016/08/20/AWS/AWS-Certified-Developer/"><img src="/images/About/Developer-Associate.png"></a>
	</div>

	<hr />
</div><!-- col-md-3 -->

		

	</div><!-- row -->


    </div>
  </div>


<div class="container-narrow">
    <footer> <p>
  &copy; 2015-2022 Rick Hwang
  
      with help from <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="http://getbootstrap.com/" target="_blank">Twitter Bootstrap</a>. Theme base on <a target="_blank" rel="noopener" href="http://github.com/wzpan/hexo-theme-freemind/">Freemind</a>.
</p> </footer>
</div>

<!-- container-narrow -->

<div id="gotop">

  <!-- 
    <i class="fa fa-sitemap"></i> <a href="/2017/12/29/About/About-This-Blog/" title="About this blog" target="_blank"]);">關於這裡</a><br />
  
    <i class="fa fa-user"></i> <a href="/2017/12/29/About/About-Author/" title="" target="_blank"]);">關於作者</a><br />
  
    <i class="fa fa-book"></i> <a href="/2017/09/20/About/Learning-Approaches/" title="" target="_blank"]);">學習法則</a><br />
  
    <i class="fa fa-coffee"></i> <a href="https://www.gtcafe.com" title="GTCafe Studio" target="_blank"]);">GTCafe Studio</a><br />
  
    <i class="fa fa-music"></i> <a href="https://www.gtcafe.com/rickmidi/" title="喝咖啡 聊音樂 (v2021)" target="_blank"]);">喝咖啡 聊音樂 (v2021)</a><br />
   -->

  <!-- <h4>About</h4> -->

  
    <li><a href="/2035/01/21/Index/">全站索引</a></li>
  
    <li><a href="/2017/12/29/About/About-This-Blog/">關於這裏</a></li>
  
    <li><a href="/2017/12/29/About/About-Author/">關於作者</a></li>
  
    <li><a href="/2017/09/20/About/Learning-Approaches/">學習法則</a></li>
  
    <li><a href="/2017/11/26/Thinking-in-Essence/">思考本質</a></li>
  
    <li><a href="/2017/12/02/About/Epiphany/">一些領悟</a></li>
  
    <li><a href="/2014/10/26/Management/Classified-Philosophy/">分類哲學</a></li>
  

  <a href="#">▲ TOP ▲ </a>
</div>

<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
<script src="/js/gtcafe-tracking.js"></script>




<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>

<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);

// GTCafe API: completet
tracking_update();
</script>



</body>
</html>
